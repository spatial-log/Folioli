{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/lib/db.ts"],"sourcesContent":["import Database from \"@tauri-apps/plugin-sql\";\n\nlet dbInstance: Database | null = null;\n\nconst SCHEMA = `\n    CREATE TABLE IF NOT EXISTS transactions (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        date TEXT NOT NULL,\n        transaction_code TEXT,\n        name TEXT NOT NULL,\n        memo TEXT,\n        category TEXT,\n        amount REAL NOT NULL,\n        status TEXT DEFAULT 'pending',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    )\n`;\n\n/**\n * Initialize the database connection and schema.\n * Returns the database instance.\n */\nexport async function initDB(): Promise<Database | null> {\n    // Check if running in Tauri environment\n    if (typeof window === \"undefined\" || !(\"__TAURI_INTERNALS__\" in window)) {\n        console.warn(\"⚠️ initDB called outside of Tauri environment\");\n        return null;\n    }\n\n    if (dbInstance) {\n        return dbInstance;\n    }\n\n    try {\n        dbInstance = await Database.load(\"sqlite:folioli.db\");\n        console.log(\"✅ Database connected: folioli.db\");\n\n        await dbInstance.execute(SCHEMA);\n\n        // Verify schema has required columns\n        try {\n            await dbInstance.execute(\"SELECT name FROM transactions LIMIT 1\");\n        } catch {\n            console.log(\"⚠️ Schema mismatch detected. Recreating table...\");\n            await dbInstance.execute(\"DROP TABLE IF EXISTS transactions\");\n            await dbInstance.execute(SCHEMA);\n        }\n\n        console.log(\"✅ Schema initialized: 'transactions' table ready\");\n        return dbInstance;\n    } catch (error) {\n        console.error(\"❌ Failed to initialize database:\", error);\n        return null;\n    }\n}\n\n/**\n * Get the existing database instance.\n * Throws an error if not initialized.\n */\nexport function getDB(): Database {\n    if (!dbInstance) {\n        throw new Error(\"Database not initialized. Call initDB() first.\");\n    }\n    return dbInstance;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,IAAI,aAA8B;AAElC,MAAM,SAAS,CAAC;;;;;;;;;;;;AAYhB,CAAC;AAMM,eAAe;IAClB,wCAAwC;IACxC,IAAI,kDAAkB,eAAe,CAAC,CAAC,yBAAyB,MAAM,GAAG;QACrE,QAAQ,IAAI,CAAC;QACb,OAAO;IACX;;;AA2BJ;AAMO,SAAS;IACZ,IAAI,CAAC,YAAY;QACb,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/lib/categories.ts"],"sourcesContent":["// Predefined categories for transaction classification\nexport const CATEGORIES = [\n    \"Uncategorized\",\n    \"Groceries\",\n    \"Dining\",\n    \"Takeout\",\n    \"Cafe\",\n    \"Snacks\",\n    \"Fuel\",\n    \"Car Payment\",\n    \"Car Repairs\",\n    \"Car Wash\",\n    \"Parking\",\n    \"Public Transit\",\n    \"Rideshare\",\n    \"Rent\",\n    \"Loan Payment\",\n    \"Utilities\",\n    \"Phone & Internet\",\n    \"Subscriptions\",\n    \"Investments\",\n    \"Insurance\",\n    \"Healthcare\",\n    \"Pharmacy\",\n    \"Fitness\",\n    \"Personal Care\",\n    \"Clothing\",\n    \"Electronics\",\n    \"Home & Garden\",\n    \"Books & Records\",\n    \"Hobbies\",\n    \"Entertainment\",\n    \"Travel\",\n    \"Hotels\",\n    \"Flights\",\n    \"Gifts\",\n    \"Charity\",\n    \"Education\",\n    \"Account Transfer\",\n    \"ATM Withdrawal\",\n    \"Bank Fee\",\n    \"Income\",\n    \"Refund\",\n    \"Cinema\",\n    \"Office Supplies\",\n    \"Business Expense\",\n    \"Other\"\n] as const;\n\nexport type Category = typeof CATEGORIES[number];\n\n// Keyword mapping for auto-categorization\n// Each category has an array of keywords/patterns to match\nconst CATEGORY_KEYWORDS: Record<string, string[]> = {\n    \"Groceries\": [\n        \"grocery\", \"supermarket\", \"whole foods\", \"trader joe\", \"costco\", \"walmart\",\n        \"target\", \"safeway\", \"kroger\", \"publix\", \"aldi\", \"lidl\", \"metro\", \"loblaws\",\n        \"sobeys\", \"no frills\", \"food basics\", \"freshco\", \"save-on\", \"iga\",\n        \"farm boy\", \"maxi\", \"provigo\", \"super c\", \"adonis\", \"giant tiger\"\n    ],\n    \"Dining\": [\n        \"restaurant\", \"bistro\", \"grill\", \"steakhouse\", \"sushi\", \"thai\", \"indian\",\n        \"chinese\", \"mexican\", \"italian\", \"diner\", \"eatery\", \"pizza\", \"burger\",\n        \"taco\", \"kfc\", \"popeyes\"\n    ],\n    \"Takeout\": [\n        \"doordash\", \"uber eats\", \"ubereats\", \"skip the dishes\", \"grubhub\", \"postmates\",\n        \"instacart\", \"delivery\", \"takeout\", \"take out\"\n    ],\n    \"Cafe\": [\n        \"starbucks\", \"tim horton\", \"dunkin\", \"coffee\", \"cafe\", \"café\", \"tea\",\n        \"espresso\", \"latte\", \"bakery\", \"pastry\", \"peet's\",\n        \"little victories\", \"happy goat\", \"bridgehead\", \"ministry of coffee\", \"arlington five\", \"equator coffee\"\n    ],\n    \"Snacks\": [\n        \"convenience\", \"7-eleven\", \"circle k\", \"couche-tard\", \"vending\",\n        \"snacks\", \"candy\", \"dollarama\"\n    ],\n    \"Fuel\": [\n        \"gas\", \"fuel\", \"shell\", \"esso\", \"petro\", \"chevron\", \"exxon\", \"mobil\",\n        \"bp \", \"sunoco\", \"texaco\", \"citgo\", \"valero\", \"costco gas\", \"canadian tire gas\",\n        \"ultramar\"\n    ],\n    \"Car Payment\": [\n        \"toyota financial\", \"honda finance\", \"ford credit\", \"nissan finance\",\n        \"auto loan\", \"vehicle finance\", \"car payment\", \"motors finance\"\n    ],\n    \"Car Repairs\": [\n        \"auto repair\", \"mechanic\", \"oil change\", \"tire\", \"midas\", \"jiffy lube\",\n        \"autozone\", \"napa auto\", \"canadian tire\", \"mr. lube\", \"meineke\"\n    ],\n    \"Car Wash\": [\n        \"car wash\", \"carwash\", \"auto spa\", \"detail\"\n    ],\n    \"Parking\": [\n        \"parking\", \"parkade\", \"impark\", \"indigo park\", \"meter\"\n    ],\n    \"Public Transit\": [\n        \"transit\", \"metro\", \"subway\", \"bus\", \"ttc\", \"stm\", \"translink\", \"oc transpo\", \"presto\"\n    ],\n    \"Rideshare\": [\n        \"uber\", \"lyft\", \"taxi\", \"cab\"\n    ],\n    \"Rent\": [\n        \"rent\", \"lease\", \"landlord\", \"property management\"\n    ],\n    \"Loan Payment\": [\n        \"student loan\", \"osap\", \"nslsc\", \"loan repayment\", \"line of credit\", \"loc payment\"\n    ],\n    \"Utilities\": [\n        \"hydro\", \"electric\", \"power\", \"water\", \"gas bill\", \"utility\", \"enbridge\",\n        \"fortis\", \"bc hydro\", \"toronto hydro\", \"hydro ottawa\", \"hydro quebec\"\n    ],\n    \"Phone & Internet\": [\n        \"bell\", \"rogers\", \"telus\", \"fido\", \"koodo\", \"virgin mobile\", \"freedom mobile\",\n        \"shaw\", \"videotron\", \"verizon\", \"at&t\", \"t-mobile\", \"sprint\", \"comcast\",\n        \"fizz\", \"teksavvy\"\n    ],\n    \"Subscriptions\": [\n        \"netflix\", \"spotify\", \"apple music\", \"amazon prime\", \"disney+\", \"hulu\",\n        \"hbo\", \"youtube premium\", \"audible\", \"patreon\", \"substack\", \"medium\",\n        \"adobe\", \"microsoft 365\", \"dropbox\", \"icloud\", \"google one\", \"chatgpt\", \"openai\"\n    ],\n    \"Investments\": [\n        \"wealthsimple\", \"questrade\", \"interactive brokers\", \"robinhood\",\n        \"investment\", \"mutual fund\", \"brokerage\", \"crypto\", \"coinbase\", \"binance\",\n        \"shakepay\", \"newton\"\n    ],\n    \"Insurance\": [\n        \"insurance\", \"geico\", \"allstate\", \"state farm\", \"progressive\", \"intact\",\n        \"desjardins insurance\", \"td insurance\", \"belair\"\n    ],\n    \"Healthcare\": [\n        \"doctor\", \"clinic\", \"hospital\", \"medical\", \"dental\", \"dentist\", \"optometrist\",\n        \"physio\", \"chiropractor\", \"therapy\", \"health\"\n    ],\n    \"Pharmacy\": [\n        \"pharmacy\", \"drug\", \"shoppers drug\", \"walgreens\", \"cvs\", \"rexall\",\n        \"london drugs\", \"rx\", \"jean coutu\", \"pharmaprix\"\n    ],\n    \"Fitness\": [\n        \"gym\", \"fitness\", \"goodlife\", \"planet fitness\", \"equinox\", \"ymca\", \"yoga\",\n        \"crossfit\", \"peloton\", \"anytime fitness\"\n    ],\n    \"Personal Care\": [\n        \"salon\", \"barber\", \"hair\", \"spa\", \"nail\", \"beauty\", \"sephora\", \"ulta\"\n    ],\n    \"Clothing\": [\n        \"clothing\", \"apparel\", \"h&m\", \"zara\", \"gap\", \"old navy\", \"uniqlo\",\n        \"nordstrom\", \"macy\", \"nike\", \"adidas\", \"lululemon\", \"aritzia\", \"simons\"\n    ],\n    \"Electronics\": [\n        \"best buy\", \"apple store\", \"microsoft store\", \"electronics\", \"computer\",\n        \"phone\", \"laptop\", \"canadacomputers\"\n    ],\n    \"Home & Garden\": [\n        \"home depot\", \"lowes\", \"ikea\", \"wayfair\", \"bed bath\", \"williams sonoma\",\n        \"crate & barrel\", \"pottery barn\", \"home hardware\", \"rona\", \"canadian tire\"\n    ],\n    \"Books & Records\": [\n        \"book\", \"amazon kindle\", \"chapters\", \"indigo\", \"barnes\", \"vinyl\", \"record\"\n    ],\n    \"Hobbies\": [\n        \"hobby\", \"craft\", \"michaels\", \"joann\", \"hobby lobby\", \"game\", \"sport\"\n    ],\n    \"Entertainment\": [\n        \"cinema\", \"movie\", \"theatre\", \"theater\", \"concert\", \"ticket\", \"event\",\n        \"amc\", \"cineplex\", \"regal\", \"stubhub\", \"ticketmaster\", \"live nation\"\n    ],\n    \"Travel\": [\n        \"travel\", \"expedia\", \"booking.com\", \"airbnb\", \"vrbo\", \"tripadvisor\", \"viator\"\n    ],\n    \"Hotels\": [\n        \"hotel\", \"marriott\", \"hilton\", \"hyatt\", \"ihg\", \"wyndham\", \"best western\",\n        \"motel\", \"inn\", \"resort\"\n    ],\n    \"Flights\": [\n        \"airline\", \"air canada\", \"westjet\", \"united\", \"delta\", \"american airlines\",\n        \"southwest\", \"jetblue\", \"spirit\", \"frontier\", \"flight\", \"porter\"\n    ],\n    \"Gifts\": [\n        \"gift\", \"present\", \"hallmark\", \"greeting card\"\n    ],\n    \"Charity\": [\n        \"charity\", \"donation\", \"donate\", \"nonprofit\", \"foundation\", \"red cross\"\n    ],\n    \"Education\": [\n        \"tuition\", \"school\", \"university\", \"college\", \"course\", \"udemy\", \"coursera\",\n        \"skillshare\", \"masterclass\"\n    ],\n    \"Account Transfer\": [\n        \"transfer\", \"e-transfer\", \"interac\", \"wire\", \"ach\", \"direct deposit\",\n        \"internet withdrawal to tangerine\", \"internet deposit from tangerine\",\n        \"tangerine credit card payment\", \"credit card payment\"\n    ],\n    \"ATM Withdrawal\": [\n        \"atm\", \"withdrawal\", \"cash\", \"withdraw\"\n    ],\n    \"Bank Fee\": [\n        \"fee\", \"service charge\", \"monthly fee\", \"overdraft\", \"nsf\"\n    ],\n    \"Income\": [\n        \"payroll\", \"salary\", \"deposit\", \"direct deposit\", \"income\", \"payment received\",\n        \"interest paid\"\n    ],\n    \"Refund\": [\n        \"refund\", \"return\", \"credit\", \"reimbursement\"\n    ]\n};\n\n/**\n * Auto-categorize a transaction based on its name/description\n * Returns the best matching category or \"Uncategorized\"\n */\nexport function autoCategorize(name: string): Category {\n    const lowercaseName = name.toLowerCase();\n\n    // Check each category's keywords\n    for (const [category, keywords] of Object.entries(CATEGORY_KEYWORDS)) {\n        for (const keyword of keywords) {\n            if (lowercaseName.includes(keyword.toLowerCase())) {\n                return category as Category;\n            }\n        }\n    }\n\n    return \"Uncategorized\";\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 602, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/lib/dashboardUtils.ts"],"sourcesContent":["// Dashboard utility functions for financial analytics\n\nimport { Transaction } from \"./types\";\nimport { Category } from \"./categories\";\n\n// Category groupings for cleaner analytics\nexport const CATEGORY_GROUPS: Record<string, Category[]> = {\n    \"Food & Dining\": [\"Groceries\", \"Dining\", \"Takeout\", \"Cafe\", \"Snacks\"],\n    \"Bills & Utilities\": [\"Utilities\", \"Phone & Internet\", \"Insurance\", \"Subscriptions\", \"Bank Fee\", \"ATM Withdrawal\"],\n    \"Rent & Housing\": [\"Rent\"],\n    \"Investing\": [\"Investments\"],\n    \"Hobbies & Home\": [\"Hobbies\", \"Home & Garden\", \"Clothing\", \"Electronics\", \"Books & Records\", \"Entertainment\", \"Cinema\"],\n    \"Transportation\": [\"Fuel\", \"Car Payment\", \"Car Repairs\", \"Car Wash\", \"Parking\", \"Public Transit\", \"Rideshare\"],\n    \"Debt\": [\"Loan Payment\"],\n    \"Other\": [\"Education\", \"Gifts\", \"Charity\", \"Office Supplies\", \"Business Expense\", \"Other\", \"Uncategorized\", \"Healthcare\", \"Pharmacy\", \"Fitness\", \"Personal Care\", \"Travel\", \"Hotels\", \"Flights\"],\n};\n\n/**\n * Parse a date string robustly (handles various formats)\n */\nexport function parseDate(dateStr: string): Date | null {\n    if (!dateStr) return null;\n\n    // Try direct parsing first\n    let date = new Date(dateStr);\n    if (!isNaN(date.getTime())) return date;\n\n    // Try parsing common formats like \"MM/DD/YYYY\" or \"DD/MM/YYYY\"\n    const parts = dateStr.split(/[\\/\\-\\.]/);\n    if (parts.length === 3) {\n        // Assume MM/DD/YYYY or YYYY-MM-DD\n        const [a, b, c] = parts.map(p => parseInt(p, 10));\n        if (a > 1000) {\n            // YYYY-MM-DD\n            date = new Date(a, b - 1, c);\n        } else if (c > 1000) {\n            // MM/DD/YYYY or DD/MM/YYYY\n            date = new Date(c, a - 1, b);\n        }\n        if (!isNaN(date.getTime())) return date;\n    }\n\n    return null;\n}\n\n/**\n * Get category group for a specific category\n */\nexport function getCategoryGroup(category: string | undefined): string {\n    if (!category) return \"Other\";\n\n    for (const [group, categories] of Object.entries(CATEGORY_GROUPS)) {\n        if (categories.includes(category as Category)) {\n            return group;\n        }\n    }\n    return \"Other\";\n}\n\n/**\n * Get year-over-year comparison data (Latest Year vs Prior Year)\n */\nexport function getYoYComparison(transactions: Transaction[]): {\n    currentYear: string;\n    previousYear: string;\n    currentTotal: number;\n    previousTotal: number;\n    change: number;\n    categoryComparison: Array<{\n        group: string;\n        current: number;\n        previous: number;\n        color: string;\n    }>;\n} {\n    // Find the latest transaction year to anchor the comparison\n    const dates = transactions\n        .map(t => parseDate(t.date))\n        .filter((d): d is Date => d !== null);\n\n    let currentYearNum = new Date().getFullYear();\n\n    if (dates.length > 0) {\n        const maxDate = new Date(Math.max(...dates.map(d => d.getTime())));\n        currentYearNum = maxDate.getFullYear();\n    }\n\n    const previousYearNum = currentYearNum - 1;\n\n    const currentYearLabel = `${currentYearNum}`;\n    const previousYearLabel = `${previousYearNum}`;\n\n    const currentTx = transactions.filter(tx => {\n        const d = parseDate(tx.date);\n        return d && d.getFullYear() === currentYearNum && tx.amount < 0;\n    });\n\n    const previousTx = transactions.filter(tx => {\n        const d = parseDate(tx.date);\n        return d && d.getFullYear() === previousYearNum && tx.amount < 0;\n    });\n\n    const currentTotal = currentTx.reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n    const previousTotal = previousTx.reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    // Group by category\n    const currentByGroup: Record<string, number> = {};\n    const previousByGroup: Record<string, number> = {};\n\n    for (const tx of currentTx) {\n        const group = getCategoryGroup(tx.category);\n        currentByGroup[group] = (currentByGroup[group] || 0) + Math.abs(tx.amount);\n    }\n\n    for (const tx of previousTx) {\n        const group = getCategoryGroup(tx.category);\n        previousByGroup[group] = (previousByGroup[group] || 0) + Math.abs(tx.amount);\n    }\n\n    // Combine and sort\n    const allGroups = new Set([...Object.keys(currentByGroup), ...Object.keys(previousByGroup)]);\n\n    const categoryComparison = Array.from(allGroups).map(group => ({\n        group,\n        current: currentByGroup[group] || 0,\n        previous: previousByGroup[group] || 0,\n        color: GROUP_COLORS[group] || \"#94A3B8\"\n    })).sort((a, b) => b.current - a.current);\n\n    // Calculate percentage change\n    const change = previousTotal > 0\n        ? ((currentTotal - previousTotal) / previousTotal)\n        : currentTotal > 0 ? 1 : 0;\n\n    return {\n        currentYear: currentYearLabel,\n        previousYear: previousYearLabel,\n        currentTotal,\n        previousTotal,\n        change,\n        categoryComparison\n    };\n}\n\n// Group colors for charts\nexport const GROUP_COLORS: Record<string, string> = {\n    \"Food & Dining\": \"#F59E0B\",      // amber\n    \"Transportation\": \"#3B82F6\",      // blue\n    \"Housing\": \"#8B5CF6\",             // violet\n    \"Shopping\": \"#EC4899\",            // pink\n    \"Health & Wellness\": \"#10B981\",   // emerald\n    \"Entertainment\": \"#F97316\",       // orange\n    \"Travel\": \"#06B6D4\",              // cyan\n    \"Financial\": \"#6B7280\",           // gray\n    \"Other\": \"#94A3B8\",               // slate\n};\n\nexport interface MonthlyData {\n    month: string;        // YYYY-MM format\n    monthLabel: string;   // \"Jan\", \"Feb\", etc.\n    income: number;\n    expenses: number;\n    net: number;\n}\n\nexport interface CategoryGroupData {\n    group: string;\n    total: number;\n    color: string;\n    percentage: number;\n}\n\n/**\n * Get transactions for a specific month\n */\nexport function getTransactionsForMonth(transactions: Transaction[], year: number, month: number): Transaction[] {\n    return transactions.filter(tx => {\n        const date = parseDate(tx.date);\n        if (!date) return false;\n        return date.getFullYear() === year && date.getMonth() === month;\n    });\n}\n\n/**\n * Get all unique months from transactions (sorted chronologically)\n */\nexport function getUniqueMonths(transactions: Transaction[]): Array<{ year: number; month: number; label: string }> {\n    const monthsSet = new Map<string, { year: number; month: number; label: string }>();\n\n    for (const tx of transactions) {\n        const date = parseDate(tx.date);\n        if (!date) continue;\n\n        const year = date.getFullYear();\n        const month = date.getMonth();\n        const key = `${year}-${month}`;\n\n        if (!monthsSet.has(key)) {\n            const label = date.toLocaleString('default', { month: 'short' });\n            monthsSet.set(key, { year, month, label });\n        }\n    }\n\n    return Array.from(monthsSet.values()).sort((a, b) => {\n        if (a.year !== b.year) return a.year - b.year;\n        return a.month - b.month;\n    });\n}\n\n/**\n * Calculate monthly totals for income, expenses, and net\n */\nexport function getMonthlyTotals(transactions: Transaction[], monthsBack: number = 6): MonthlyData[] {\n    const result: MonthlyData[] = [];\n    const now = new Date();\n\n    for (let i = monthsBack - 1; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const year = date.getFullYear();\n        const month = date.getMonth();\n        const monthLabel = date.toLocaleString('default', { month: 'short' });\n        const monthKey = `${year}-${String(month + 1).padStart(2, '0')}`;\n\n        const monthTransactions = getTransactionsForMonth(transactions, year, month);\n\n        const income = monthTransactions\n            .filter(tx => tx.amount > 0)\n            .reduce((sum, tx) => sum + tx.amount, 0);\n\n        const expenses = monthTransactions\n            .filter(tx => tx.amount < 0)\n            .reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n        result.push({\n            month: monthKey,\n            monthLabel,\n            income,\n            expenses,\n            net: income - expenses,\n        });\n    }\n\n    return result;\n}\n\n/**\n * Get current month's totals\n */\nexport function getCurrentMonthTotals(transactions: Transaction[]): { income: number; expenses: number; net: number } {\n    const now = new Date();\n    const monthTransactions = getTransactionsForMonth(transactions, now.getFullYear(), now.getMonth());\n\n    const income = monthTransactions\n        .filter(tx => tx.amount > 0)\n        .reduce((sum, tx) => sum + tx.amount, 0);\n\n    const expenses = monthTransactions\n        .filter(tx => tx.amount < 0)\n        .reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    return { income, expenses, net: income - expenses };\n}\n\n/**\n * Get previous month's totals for comparison\n */\nexport function getPreviousMonthTotals(transactions: Transaction[]): { income: number; expenses: number; net: number } {\n    const now = new Date();\n    const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    const monthTransactions = getTransactionsForMonth(transactions, prevMonth.getFullYear(), prevMonth.getMonth());\n\n    const income = monthTransactions\n        .filter(tx => tx.amount > 0)\n        .reduce((sum, tx) => sum + tx.amount, 0);\n\n    const expenses = monthTransactions\n        .filter(tx => tx.amount < 0)\n        .reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    return { income, expenses, net: income - expenses };\n}\n\n/**\n * Calculate month-over-month percentage change\n */\nexport function getMoMChange(current: number, previous: number): number {\n    if (previous === 0) return current > 0 ? 100 : 0;\n    return ((current - previous) / previous) * 100;\n}\n\n/**\n * Get spending grouped by category groups for current month\n */\nexport function getCategoryGroupSpending(transactions: Transaction[], year?: number, month?: number): CategoryGroupData[] {\n    const now = new Date();\n    const targetYear = year ?? now.getFullYear();\n    const targetMonth = month ?? now.getMonth();\n\n    const monthTransactions = getTransactionsForMonth(transactions, targetYear, targetMonth)\n        .filter(tx => tx.amount < 0); // Only expenses\n\n    const groupTotals: Record<string, number> = {};\n\n    for (const tx of monthTransactions) {\n        const group = getCategoryGroup(tx.category);\n        groupTotals[group] = (groupTotals[group] || 0) + Math.abs(tx.amount);\n    }\n\n    const totalExpenses = Object.values(groupTotals).reduce((sum, val) => sum + val, 0);\n\n    const result: CategoryGroupData[] = Object.entries(groupTotals)\n        .map(([group, total]) => ({\n            group,\n            total,\n            color: GROUP_COLORS[group] || \"#94A3B8\",\n            percentage: totalExpenses > 0 ? (total / totalExpenses) * 100 : 0,\n        }))\n        .sort((a, b) => b.total - a.total);\n\n    return result;\n}\n\n\n\n/**\n * Format currency for display\n */\nexport function formatCurrency(amount: number): string {\n    return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n    }).format(amount);\n}\n\n/**\n * Format percentage for display\n */\nexport function formatPercentage(value: number): string {\n    const sign = value >= 0 ? '+' : '';\n    return `${sign}${value.toFixed(1)}%`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 905, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/dashboard/MetricCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { Minus, TrendingUp, TrendingDown } from \"lucide-react\";\nimport { formatCurrency, formatPercentage, getMoMChange } from \"@/lib/dashboardUtils\";\n\ninterface MetricCardProps {\n    title: string;\n    value: number;\n    previousValue: number;\n    type: \"income\" | \"expense\" | \"net\";\n    icon: React.ReactNode;\n    delay?: number;\n}\n\nexport function MetricCard({ title, value, previousValue, type, icon, delay = 0 }: MetricCardProps) {\n    const change = getMoMChange(value, previousValue);\n    const isPositive = change >= 0;\n    const isNeutral = Math.abs(change) < 0.1;\n\n    // For expenses, \"positive\" (spending more) is actually bad\n    const isGood = type === \"expense\" ? !isPositive : isPositive;\n\n    const colorClass = isNeutral\n        ? \"text-gray-500\"\n        : isGood\n            ? \"text-emerald-600\"\n            : \"text-red-500\";\n\n    const bgGradient = type === \"income\"\n        ? \"from-emerald-50 to-emerald-100/50\"\n        : type === \"expense\"\n            ? \"from-red-50 to-rose-100/50\"\n            : \"from-lime-50 to-lime-100/50\";\n\n    const iconBg = type === \"income\"\n        ? \"bg-emerald-500\"\n        : type === \"expense\"\n            ? \"bg-red-500\"\n            : \"bg-lime-600\";\n\n    return (\n        <div\n            className={`relative overflow-hidden bg-gradient-to-br ${bgGradient} rounded-2xl p-6 shadow-sm border border-white/50 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:scale-[1.02] group`}\n            style={{ animationDelay: `${delay}ms` }}\n        >\n            {/* Background decoration */}\n            <div className=\"absolute -right-4 -top-4 w-24 h-24 rounded-full bg-white/30 blur-2xl group-hover:scale-150 transition-transform duration-500\" />\n\n            <div className=\"relative\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    <span className=\"text-sm font-medium text-gray-600 uppercase tracking-wide\">{title}</span>\n                    <div className={`p-2 ${iconBg} rounded-xl text-white shadow-lg`}>\n                        {icon}\n                    </div>\n                </div>\n\n                <div className=\"mb-2\">\n                    <span className=\"text-4xl font-bold text-gray-900 tracking-tight\">\n                        {formatCurrency(Math.abs(value))}\n                    </span>\n                </div>\n\n                <div className={`flex items-center gap-1.5 ${colorClass}`}>\n                    {isNeutral ? (\n                        <Minus className=\"w-4 h-4\" />\n                    ) : isPositive ? (\n                        <TrendingUp className=\"w-4 h-4\" />\n                    ) : (\n                        <TrendingDown className=\"w-4 h-4\" />\n                    )}\n                    <span className=\"text-sm font-semibold\">\n                        {formatPercentage(change)}\n                    </span>\n                    <span className=\"text-xs text-gray-500 ml-1\">vs last month</span>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAHA;;;;AAcO,SAAS,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,EAAmB;IAC9F,MAAM,SAAS,IAAA,4IAAY,EAAC,OAAO;IACnC,MAAM,aAAa,UAAU;IAC7B,MAAM,YAAY,KAAK,GAAG,CAAC,UAAU;IAErC,2DAA2D;IAC3D,MAAM,SAAS,SAAS,YAAY,CAAC,aAAa;IAElD,MAAM,aAAa,YACb,kBACA,SACI,qBACA;IAEV,MAAM,aAAa,SAAS,WACtB,sCACA,SAAS,YACL,+BACA;IAEV,MAAM,SAAS,SAAS,WAClB,mBACA,SAAS,YACL,eACA;IAEV,qBACI,8OAAC;QACG,WAAW,CAAC,2CAA2C,EAAE,WAAW,uIAAuI,CAAC;QAC5M,OAAO;YAAE,gBAAgB,GAAG,MAAM,EAAE,CAAC;QAAC;;0BAGtC,8OAAC;gBAAI,WAAU;;;;;;0BAEf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;0CAA6D;;;;;;0CAC7E,8OAAC;gCAAI,WAAW,CAAC,IAAI,EAAE,OAAO,gCAAgC,CAAC;0CAC1D;;;;;;;;;;;;kCAIT,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCACX,IAAA,8IAAc,EAAC,KAAK,GAAG,CAAC;;;;;;;;;;;kCAIjC,8OAAC;wBAAI,WAAW,CAAC,0BAA0B,EAAE,YAAY;;4BACpD,0BACG,8OAAC,6MAAK;gCAAC,WAAU;;;;;uCACjB,2BACA,8OAAC,gOAAU;gCAAC,WAAU;;;;;qDAEtB,8OAAC,sOAAY;gCAAC,WAAU;;;;;;0CAE5B,8OAAC;gCAAK,WAAU;0CACX,IAAA,gJAAgB,EAAC;;;;;;0CAEtB,8OAAC;gCAAK,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;;;;;;;AAKjE"}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/dashboard/RevenueChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\";\nimport { formatCurrency, getMonthlyTotals, MonthlyData } from \"@/lib/dashboardUtils\";\nimport { Transaction } from \"@/lib/types\";\n\ninterface RevenueChartProps {\n    transactions: Transaction[];\n}\n\nexport function RevenueChart({ transactions }: RevenueChartProps) {\n    const data = useMemo(() => {\n        // Get last 6 months of data\n        return getMonthlyTotals(transactions, 6); // returns chronological order\n    }, [transactions]);\n\n    // Calculate max value for domain to add some headroom\n    const maxValue = Math.max(\n        ...data.map(d => Math.max(d.income, d.expenses)),\n        1000 // min fallback\n    );\n\n    return (\n        <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 h-full flex flex-col\">\n            <h3 className=\"text-sm font-bold text-gray-700 uppercase tracking-wide mb-6\">\n                Income vs Expenses\n            </h3>\n\n            <div className=\"flex-1 min-h-[300px] w-full\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <AreaChart\n                        data={data}\n                        margin={{\n                            top: 10,\n                            right: 10,\n                            left: 0,\n                            bottom: 0,\n                        }}\n                    >\n                        <defs>\n                            <linearGradient id=\"colorIncome\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.2} />\n                                <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0} />\n                            </linearGradient>\n                            <linearGradient id=\"colorExpense\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                <stop offset=\"5%\" stopColor=\"#EF4444\" stopOpacity={0.2} />\n                                <stop offset=\"95%\" stopColor=\"#EF4444\" stopOpacity={0} />\n                            </linearGradient>\n                        </defs>\n                        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#E5E7EB\" />\n                        <XAxis\n                            dataKey=\"monthLabel\"\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6B7280', fontSize: 12 }}\n                            dy={10}\n                        />\n                        <YAxis\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6B7280', fontSize: 12 }}\n                            tickFormatter={(value) => `$${value / 1000}k`}\n                            domain={[0, maxValue * 1.1]}\n                        />\n                        <Tooltip content={<CustomTooltip />} />\n                        <Area\n                            type=\"monotone\"\n                            dataKey=\"income\"\n                            stroke=\"#10B981\"\n                            strokeWidth={3}\n                            fillOpacity={1}\n                            fill=\"url(#colorIncome)\"\n                            name=\"Income\"\n                            animationDuration={1500}\n                        />\n                        <Area\n                            type=\"monotone\"\n                            dataKey=\"expenses\"\n                            stroke=\"#EF4444\"\n                            strokeWidth={3}\n                            fillOpacity={1}\n                            fill=\"url(#colorExpense)\"\n                            name=\"Expenses\"\n                            animationDuration={1500}\n                            animationBegin={300}\n                        />\n                    </AreaChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n}\n\nconst CustomTooltip = ({ active, payload, label }: any) => {\n    if (active && payload && payload.length) {\n        return (\n            <div className=\"bg-white/90 backdrop-blur-md border border-gray-100 p-4 rounded-xl shadow-xl\">\n                <p className=\"text-sm font-semibold text-gray-900 mb-2\">{label}</p>\n                {payload.map((entry: any, index: number) => (\n                    <div key={index} className=\"flex items-center gap-2 mb-1 last:mb-0\">\n                        <div\n                            className=\"w-2 h-2 rounded-full\"\n                            style={{ backgroundColor: entry.color }}\n                        />\n                        <span className=\"text-xs text-gray-500 capitalize\">{entry.name}:</span>\n                        <span className=\"text-sm font-bold text-gray-900\">\n                            {formatCurrency(entry.value)}\n                        </span>\n                    </div>\n                ))}\n            </div>\n        );\n    }\n    return null;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1335, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/dashboard/ExpenseBreakdown.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Sector } from \"recharts\";\nimport { formatCurrency, getCategoryGroupSpending, GROUP_COLORS } from \"@/lib/dashboardUtils\";\nimport { Transaction } from \"@/lib/types\";\n\ninterface ExpenseBreakdownProps {\n    transactions: Transaction[];\n}\n\nconst COLORS = [\"#10B981\", \"#3B82F6\", \"#F59E0B\", \"#EF4444\", \"#8B5CF6\", \"#EC4899\", \"#6366F1\", \"#14B8A6\"];\n\nconst renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index, name, value }: any) => {\n    const RADIAN = Math.PI / 180;\n    const radius = outerRadius + 25; // Push label out further\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\n    const textAnchor = x > cx ? 'start' : 'end';\n\n    // Only show label if slice is big enough\n    if (percent < 0.02) return null;\n\n    return (\n        <g>\n            <text x={x} y={y} fill=\"#374151\" textAnchor={textAnchor} dominantBaseline=\"central\" fontSize={12} fontWeight={600}>\n                {name}\n            </text>\n            <text x={x} y={y + 14} fill=\"#6B7280\" textAnchor={textAnchor} dominantBaseline=\"central\" fontSize={11}>\n                {formatCurrency(value)} ({`${(percent * 100).toFixed(0)}%`})\n            </text>\n        </g>\n    );\n};\n\nexport function ExpenseBreakdown({ transactions }: ExpenseBreakdownProps) {\n    const [activeIndex, setActiveIndex] = useState<number | undefined>(undefined);\n\n    const data = useMemo(() => {\n        const rawData = getCategoryGroupSpending(transactions);\n        return rawData.filter(d => d.total > 0);\n    }, [transactions]);\n\n    const onPieEnter = (_: any, index: number) => {\n        setActiveIndex(index);\n    };\n\n    if (data.length === 0) {\n        return (\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 h-full flex flex-col items-center justify-center text-center\">\n                <h3 className=\"text-sm font-bold text-gray-700 uppercase tracking-wide mb-6 self-start\">\n                    Spending Breakdown\n                </h3>\n                <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400\">\n                    <p>No expense data available</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 h-full flex flex-col\">\n            <h3 className=\"text-sm font-bold text-gray-700 uppercase tracking-wide mb-6\">\n                Spending by Category\n            </h3>\n\n            <div className=\"flex-1 min-h-[300px] w-full relative\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <PieChart>\n                        <Pie\n                            data={data}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            innerRadius={55}\n                            labelLine={true}\n                            label={renderCustomizedLabel}\n                            outerRadius={80}\n                            fill=\"#8884d8\"\n                            dataKey=\"total\"\n                            nameKey=\"group\"\n                            onMouseEnter={onPieEnter}\n                            paddingAngle={2}\n                        >\n                            {data.map((entry, index) => (\n                                <Cell key={`cell-${index}`} fill={entry.color || COLORS[index % COLORS.length]} stroke=\"none\" />\n                            ))}\n                        </Pie>\n                        <Tooltip\n                            formatter={(value: any) => formatCurrency(value)}\n                            contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\n                        />\n                    </PieChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAWA,MAAM,SAAS;IAAC;IAAW;IAAW;IAAW;IAAW;IAAW;IAAW;IAAW;CAAU;AAEvG,MAAM,wBAAwB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAO;IAC3G,MAAM,SAAS,KAAK,EAAE,GAAG;IACzB,MAAM,SAAS,cAAc,IAAI,yBAAyB;IAC1D,MAAM,IAAI,KAAK,SAAS,KAAK,GAAG,CAAC,CAAC,WAAW;IAC7C,MAAM,IAAI,KAAK,SAAS,KAAK,GAAG,CAAC,CAAC,WAAW;IAC7C,MAAM,aAAa,IAAI,KAAK,UAAU;IAEtC,yCAAyC;IACzC,IAAI,UAAU,MAAM,OAAO;IAE3B,qBACI,8OAAC;;0BACG,8OAAC;gBAAK,GAAG;gBAAG,GAAG;gBAAG,MAAK;gBAAU,YAAY;gBAAY,kBAAiB;gBAAU,UAAU;gBAAI,YAAY;0BACzG;;;;;;0BAEL,8OAAC;gBAAK,GAAG;gBAAG,GAAG,IAAI;gBAAI,MAAK;gBAAU,YAAY;gBAAY,kBAAiB;gBAAU,UAAU;;oBAC9F,IAAA,8IAAc,EAAC;oBAAO;oBAAG,GAAG,CAAC,UAAU,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;;;;;;;;;;;;;AAI3E;AAEO,SAAS,iBAAiB,EAAE,YAAY,EAAyB;IACpE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB;IAEnE,MAAM,OAAO,IAAA,gNAAO,EAAC;QACjB,MAAM,UAAU,IAAA,wJAAwB,EAAC;QACzC,OAAO,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG;IACzC,GAAG;QAAC;KAAa;IAEjB,MAAM,aAAa,CAAC,GAAQ;QACxB,eAAe;IACnB;IAEA,IAAI,KAAK,MAAM,KAAK,GAAG;QACnB,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAA0E;;;;;;8BAGxF,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;kCAAE;;;;;;;;;;;;;;;;;IAInB;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA+D;;;;;;0BAI7E,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,0LAAmB;oBAAC,OAAM;oBAAO,QAAO;8BACrC,cAAA,8OAAC,gKAAQ;;0CACL,8OAAC,sJAAG;gCACA,MAAM;gCACN,IAAG;gCACH,IAAG;gCACH,aAAa;gCACb,WAAW;gCACX,OAAO;gCACP,aAAa;gCACb,MAAK;gCACL,SAAQ;gCACR,SAAQ;gCACR,cAAc;gCACd,cAAc;0CAEb,KAAK,GAAG,CAAC,CAAC,OAAO,sBACd,8OAAC,4JAAI;wCAAuB,MAAM,MAAM,KAAK,IAAI,MAAM,CAAC,QAAQ,OAAO,MAAM,CAAC;wCAAE,QAAO;uCAA5E,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;0CAGlC,8OAAC,kKAAO;gCACJ,WAAW,CAAC,QAAe,IAAA,8IAAc,EAAC;gCAC1C,cAAc;oCAAE,cAAc;oCAAO,QAAQ;oCAAQ,WAAW;gCAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9H"}},
    {"offset": {"line": 1538, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/Dashboard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { DollarSign, CreditCard, PiggyBank } from \"lucide-react\";\nimport { Transaction } from \"@/lib/types\";\nimport { getCurrentMonthTotals, getPreviousMonthTotals } from \"@/lib/dashboardUtils\";\n\n// New Components\nimport { MetricCard } from \"./dashboard/MetricCard\";\nimport { RevenueChart } from \"./dashboard/RevenueChart\";\nimport { ExpenseBreakdown } from \"./dashboard/ExpenseBreakdown\";\nimport { MonthlyComparisonChart } from \"./dashboard/MonthlyComparisonChart\";\n\ninterface DashboardProps {\n    transactions: Transaction[];\n}\n\nexport function Dashboard({ transactions }: DashboardProps) {\n    // Filter out internal transfers from all dashboard calculations\n    const filteredTransactions = useMemo(() => {\n        return transactions.filter(tx => tx.category !== \"Account Transfer\");\n    }, [transactions]);\n\n    const currentTotals = useMemo(() => getCurrentMonthTotals(filteredTransactions), [filteredTransactions]);\n    const previousTotals = useMemo(() => getPreviousMonthTotals(filteredTransactions), [filteredTransactions]);\n\n    const now = new Date();\n    const currentMonth = now.toLocaleString('default', { month: 'long', year: 'numeric' });\n\n    return (\n        <div className=\"h-full overflow-y-auto\">\n            <div className=\"max-w-7xl mx-auto space-y-6 pb-8\">\n                {/* Header */}\n                <div className=\"mb-2\">\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Financial Overview</h1>\n                    <p className=\"text-sm text-gray-500\">{currentMonth}</p>\n                </div>\n\n                {/* Hero Metrics */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <MetricCard\n                        title=\"Income\"\n                        value={currentTotals.income}\n                        previousValue={previousTotals.income}\n                        type=\"income\"\n                        icon={<DollarSign className=\"w-5 h-5\" />}\n                        delay={0}\n                    />\n                    <MetricCard\n                        title=\"Expenses\"\n                        value={currentTotals.expenses}\n                        previousValue={previousTotals.expenses}\n                        type=\"expense\"\n                        icon={<CreditCard className=\"w-5 h-5\" />}\n                        delay={100}\n                    />\n                    <MetricCard\n                        title=\"Net Balance\"\n                        value={currentTotals.net}\n                        previousValue={previousTotals.net}\n                        type=\"net\"\n                        icon={<PiggyBank className=\"w-5 h-5\" />}\n                        delay={200}\n                    />\n                </div>\n\n                {/* Charts Row */}\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 h-[400px]\">\n                    <RevenueChart transactions={filteredTransactions} />\n                    <ExpenseBreakdown transactions={filteredTransactions} />\n                </div>\n\n                {/* Year over Year Comparison */}\n                <div className=\"h-[450px]\">\n                    <YearOverYearChart transactions={filteredTransactions} />\n                </div>\n\n                {/* Empty state message using Recharts implicit checking or explicit logic */}\n                {filteredTransactions.length === 0 && (\n                    <div className=\"bg-white rounded-2xl p-12 shadow-sm border border-gray-200 text-center mt-8\">\n                        <div className=\"w-16 h-16 bg-lime-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <PiggyBank className=\"w-8 h-8 text-lime-600\" />\n                        </div>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No transactions yet</h3>\n                        <p className=\"text-gray-500 max-w-md mx-auto\">\n                            Import your transactions from the Transactions tab to see your financial overview,\n                            spending trends, and category breakdowns.\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAEA;AAEA,iBAAiB;AACjB;AACA;AACA;AAVA;;;;;;;;AAiBO,SAAS,UAAU,EAAE,YAAY,EAAkB;IACtD,gEAAgE;IAChE,MAAM,uBAAuB,IAAA,gNAAO,EAAC;QACjC,OAAO,aAAa,MAAM,CAAC,CAAA,KAAM,GAAG,QAAQ,KAAK;IACrD,GAAG;QAAC;KAAa;IAEjB,MAAM,gBAAgB,IAAA,gNAAO,EAAC,IAAM,IAAA,qJAAqB,EAAC,uBAAuB;QAAC;KAAqB;IACvG,MAAM,iBAAiB,IAAA,gNAAO,EAAC,IAAM,IAAA,sJAAsB,EAAC,uBAAuB;QAAC;KAAqB;IAEzG,MAAM,MAAM,IAAI;IAChB,MAAM,eAAe,IAAI,cAAc,CAAC,WAAW;QAAE,OAAO;QAAQ,MAAM;IAAU;IAEpF,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,8OAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;8BAI1C,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,2JAAU;4BACP,OAAM;4BACN,OAAO,cAAc,MAAM;4BAC3B,eAAe,eAAe,MAAM;4BACpC,MAAK;4BACL,oBAAM,8OAAC,gOAAU;gCAAC,WAAU;;;;;;4BAC5B,OAAO;;;;;;sCAEX,8OAAC,2JAAU;4BACP,OAAM;4BACN,OAAO,cAAc,QAAQ;4BAC7B,eAAe,eAAe,QAAQ;4BACtC,MAAK;4BACL,oBAAM,8OAAC,gOAAU;gCAAC,WAAU;;;;;;4BAC5B,OAAO;;;;;;sCAEX,8OAAC,2JAAU;4BACP,OAAM;4BACN,OAAO,cAAc,GAAG;4BACxB,eAAe,eAAe,GAAG;4BACjC,MAAK;4BACL,oBAAM,8OAAC,6NAAS;gCAAC,WAAU;;;;;;4BAC3B,OAAO;;;;;;;;;;;;8BAKf,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,+JAAY;4BAAC,cAAc;;;;;;sCAC5B,8OAAC,uKAAgB;4BAAC,cAAc;;;;;;;;;;;;8BAIpC,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAkB,cAAc;;;;;;;;;;;gBAIpC,qBAAqB,MAAM,KAAK,mBAC7B,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,6NAAS;gCAAC,WAAU;;;;;;;;;;;sCAEzB,8OAAC;4BAAG,WAAU;sCAA2C;;;;;;sCACzD,8OAAC;4BAAE,WAAU;sCAAiC;;;;;;;;;;;;;;;;;;;;;;;AAStE"}},
    {"offset": {"line": 1763, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/DropZone.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { Upload } from \"lucide-react\";\n\ninterface DropZoneProps {\n    isDragActive?: boolean;\n}\n\nexport function DropZone({ isDragActive }: DropZoneProps) {\n    return (\n        <div\n            className={clsx(\n                \"border-2 border-dashed rounded-2xl text-center cursor-pointer overflow-hidden\",\n                \"transition-all duration-300 ease-out\",\n                isDragActive\n                    ? \"border-lime-600 bg-lime-50 py-12 px-8\"\n                    : \"border-gray-300 hover:border-gray-400 py-3 px-4\"\n            )}\n        >\n            <div className={clsx(\n                \"flex items-center justify-center gap-3 transition-all duration-300\",\n                isDragActive ? \"flex-col\" : \"flex-row\"\n            )}>\n                <Upload className={clsx(\n                    \"text-gray-400 transition-all duration-300\",\n                    isDragActive ? \"w-10 h-10 text-lime-600\" : \"w-5 h-5\"\n                )} />\n                <div>\n                    <p className={clsx(\n                        \"font-medium text-gray-700 transition-all duration-300\",\n                        isDragActive ? \"text-lg\" : \"text-sm\"\n                    )}>\n                        {isDragActive ? \"Drop your bank CSV here\" : \"Drop CSV to import\"}\n                    </p>\n                    {isDragActive && (\n                        <p className=\"text-sm text-gray-500 mt-2 animate-in fade-in duration-200\">\n                            or paste copied data from a spreadsheet\n                        </p>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAMO,SAAS,SAAS,EAAE,YAAY,EAAiB;IACpD,qBACI,8OAAC;QACG,WAAW,IAAA,gJAAI,EACX,iFACA,wCACA,eACM,0CACA;kBAGV,cAAA,8OAAC;YAAI,WAAW,IAAA,gJAAI,EAChB,sEACA,eAAe,aAAa;;8BAE5B,8OAAC,gNAAM;oBAAC,WAAW,IAAA,gJAAI,EACnB,6CACA,eAAe,4BAA4B;;;;;;8BAE/C,8OAAC;;sCACG,8OAAC;4BAAE,WAAW,IAAA,gJAAI,EACd,yDACA,eAAe,YAAY;sCAE1B,eAAe,4BAA4B;;;;;;wBAE/C,8BACG,8OAAC;4BAAE,WAAU;sCAA6D;;;;;;;;;;;;;;;;;;;;;;;AAQlG"}},
    {"offset": {"line": 1826, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/Header.tsx"],"sourcesContent":["import { Search, Settings, User } from \"lucide-react\";\nimport { Tab } from \"@/lib/types\";\n\ninterface HeaderProps {\n    activeTab: Tab;\n    onTabChange: (tab: Tab) => void;\n}\n\nexport function Header({ activeTab, onTabChange }: HeaderProps) {\n    return (\n        <header className=\"flex items-center justify-between px-6 py-4 bg-gray-50 border-b border-gray-200\">\n            {/* Logo */}\n            <div className=\"flex items-center gap-8\">\n                <h1 className=\"text-2xl font-bold text-gray-900 tracking-tight\">Folioli</h1>\n\n                {/* Navigation */}\n                <nav className=\"hidden md:flex items-center gap-6\">\n                    <button\n                        onClick={() => onTabChange(\"dashboard\")}\n                        className={`text-sm font-medium transition ${activeTab === \"dashboard\"\n                            ? \"text-gray-900 font-semibold\"\n                            : \"text-gray-500 hover:text-gray-900\"\n                            }`}\n                    >\n                        Dashboard\n                    </button>\n                    <button\n                        onClick={() => onTabChange(\"table\")}\n                        className={`text-sm font-medium transition ${activeTab === \"table\"\n                            ? \"text-gray-900 font-semibold\"\n                            : \"text-gray-500 hover:text-gray-900\"\n                            }`}\n                    >\n                        Transactions\n                    </button>\n                </nav>\n            </div>\n\n            {/* Right Section: Search & Actions */}\n            <div className=\"flex items-center gap-4\">\n                <div className=\"relative group\">\n                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <Search className=\"h-4 w-4 text-white\" />\n                    </div>\n                    <input\n                        type=\"text\"\n                        placeholder=\"\"\n                        className=\"block w-64 pl-10 pr-3 py-1.5 bg-[#7CB342] text-white placeholder-white/70 rounded-full border-none focus:outline-none focus:ring-2 focus:ring-[#7CB342]/50 transition-all hover:bg-[#689F38]\"\n                    />\n                </div>\n\n                <div className=\"flex items-center gap-3 pl-4 border-l border-gray-300\">\n                    <button\n                        onClick={() => onTabChange(\"settings\")}\n                        className={`p-2 rounded-full transition-colors ${activeTab === \"settings\"\n                            ? \"bg-gray-200 text-gray-900\"\n                            : \"text-gray-600 hover:bg-gray-200\"\n                            }`}\n                    >\n                        <Settings className=\"h-5 w-5\" />\n                    </button>\n                    <button className=\"h-8 w-8 bg-gray-300 rounded-full overflow-hidden hover:ring-2 hover:ring-gray-400 transition-all flex items-center justify-center\">\n                        <User className=\"h-5 w-5 text-gray-600\" />\n                    </button>\n                </div>\n            </div>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;;;AAQO,SAAS,OAAO,EAAE,SAAS,EAAE,WAAW,EAAe;IAC1D,qBACI,8OAAC;QAAO,WAAU;;0BAEd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAkD;;;;;;kCAGhE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,YAAY;gCAC3B,WAAW,CAAC,+BAA+B,EAAE,cAAc,cACrD,gCACA,qCACA;0CACT;;;;;;0CAGD,8OAAC;gCACG,SAAS,IAAM,YAAY;gCAC3B,WAAW,CAAC,+BAA+B,EAAE,cAAc,UACrD,gCACA,qCACA;0CACT;;;;;;;;;;;;;;;;;;0BAOT,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,gNAAM;oCAAC,WAAU;;;;;;;;;;;0CAEtB,8OAAC;gCACG,MAAK;gCACL,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAIlB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,YAAY;gCAC3B,WAAW,CAAC,mCAAmC,EAAE,cAAc,aACzD,8BACA,mCACA;0CAEN,cAAA,8OAAC,sNAAQ;oCAAC,WAAU;;;;;;;;;;;0CAExB,8OAAC;gCAAO,WAAU;0CACd,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMxC"}},
    {"offset": {"line": 1974, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/SettingsPage.tsx"],"sourcesContent":["import { Trash2, AlertTriangle, Moon, Sun, Monitor, User, LogOut, Shield, Database, Bell, CreditCard, Bot, Upload } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\ninterface SettingsPageProps {\n    onDeleteAllTransactions: () => Promise<void>;\n}\n\nexport function SettingsPage({ onDeleteAllTransactions }: SettingsPageProps) {\n    // State for all settings\n    const [currency, setCurrency] = useState(\"USD\");\n    const [theme, setTheme] = useState(\"system\");\n    const [aiSearch, setAiSearch] = useState(true);\n    const [notifications, setNotifications] = useState({\n        email: true,\n        push: true,\n        weekly: false\n    });\n    const [backupFreq, setBackupFreq] = useState(\"weekly\");\n\n    // Danger Zone State\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n    const [isDeleting, setIsDeleting] = useState(false);\n\n    // Load settings from localStorage on mount\n    useEffect(() => {\n        const storedCurrency = localStorage.getItem(\"folioli_currency\");\n        if (storedCurrency) setCurrency(storedCurrency);\n\n        const storedTheme = localStorage.getItem(\"folioli_theme\");\n        if (storedTheme) setTheme(storedTheme);\n\n        const storedAi = localStorage.getItem(\"folioli_ai_search\");\n        if (storedAi) setAiSearch(storedAi === \"true\");\n\n        const storedBackup = localStorage.getItem(\"folioli_backup\");\n        if (storedBackup) setBackupFreq(storedBackup);\n\n        const storedNotifs = localStorage.getItem(\"folioli_notifications\");\n        if (storedNotifs) {\n            try {\n                setNotifications(JSON.parse(storedNotifs));\n            } catch (e) { console.error(\"Failed to parse notifications\", e); }\n        }\n    }, []);\n\n    // Persist changes\n    const updateCurrency = (val: string) => {\n        setCurrency(val);\n        localStorage.setItem(\"folioli_currency\", val);\n    };\n\n    const updateTheme = (val: string) => {\n        setTheme(val);\n        localStorage.setItem(\"folioli_theme\", val);\n        // In a real app, this would also apply the theme class to body/html\n    };\n\n    const updateAiSearch = (val: boolean) => {\n        setAiSearch(val);\n        localStorage.setItem(\"folioli_ai_search\", String(val));\n    };\n\n    const updateBackup = (val: string) => {\n        setBackupFreq(val);\n        localStorage.setItem(\"folioli_backup\", val);\n    };\n\n    const toggleNotification = (key: keyof typeof notifications) => {\n        const newNotifs = { ...notifications, [key]: !notifications[key] };\n        setNotifications(newNotifs);\n        localStorage.setItem(\"folioli_notifications\", JSON.stringify(newNotifs));\n    };\n\n    const handleDeleteAll = async () => {\n        setIsDeleting(true);\n        try {\n            await onDeleteAllTransactions();\n            setShowDeleteConfirm(false);\n        } catch (e) {\n            console.error(\"Failed to delete transactions:\", e);\n            alert(\"Failed to delete transactions.\");\n        } finally {\n            setIsDeleting(false);\n        }\n    };\n\n    return (\n        <div className=\"max-w-4xl mx-auto pb-12\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-8\">Settings</h2>\n\n            <div className=\"space-y-8\">\n                {/* General Settings */}\n                <section>\n                    <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 pl-1\">General</h3>\n                    <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 divide-y divide-gray-100 overflow-hidden\">\n\n                        {/* Currency */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-green-50 text-green-600 rounded-lg\">\n                                    <CreditCard className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Default Currency</p>\n                                    <p className=\"text-sm text-gray-500\">Select your primary currency for reports</p>\n                                </div>\n                            </div>\n                            <select\n                                value={currency}\n                                onChange={(e) => updateCurrency(e.target.value)}\n                                className=\"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block p-2.5 min-w-[100px]\"\n                            >\n                                <option value=\"USD\">USD ($)</option>\n                                <option value=\"EUR\">EUR (€)</option>\n                                <option value=\"GBP\">GBP (£)</option>\n                                <option value=\"JPY\">JPY (¥)</option>\n                                <option value=\"CAD\">CAD ($)</option>\n                            </select>\n                        </div>\n\n                        {/* Theme */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-purple-50 text-purple-600 rounded-lg\">\n                                    {theme === 'light' ? <Sun className=\"w-5 h-5\" /> : theme === 'dark' ? <Moon className=\"w-5 h-5\" /> : <Monitor className=\"w-5 h-5\" />}\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Appearance</p>\n                                    <p className=\"text-sm text-gray-500\">Customize how Folioli looks on your device</p>\n                                </div>\n                            </div>\n                            <div className=\"flex bg-gray-100 p-1 rounded-lg\">\n                                <button\n                                    onClick={() => updateTheme('light')}\n                                    className={`p-2 rounded-md transition-all ${theme === 'light' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-900'}`}\n                                    title=\"Light Mode\"\n                                >\n                                    <Sun className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                    onClick={() => updateTheme('dark')}\n                                    className={`p-2 rounded-md transition-all ${theme === 'dark' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-900'}`}\n                                    title=\"Dark Mode\"\n                                >\n                                    <Moon className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                    onClick={() => updateTheme('system')}\n                                    className={`p-2 rounded-md transition-all ${theme === 'system' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-900'}`}\n                                    title=\"System Preference\"\n                                >\n                                    <Monitor className=\"w-4 h-4\" />\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* Notification Settings */}\n                        <div className=\"p-4\">\n                            <div className=\"flex items-start gap-4 mb-4\">\n                                <div className=\"p-2 bg-blue-50 text-blue-600 rounded-lg mt-1\">\n                                    <Bell className=\"w-5 h-5\" />\n                                </div>\n                                <div className=\"flex-1\">\n                                    <p className=\"font-medium text-gray-900 mb-1\">Notifications</p>\n                                    <div className=\"space-y-3\">\n                                        <label className=\"flex items-center justify-between cursor-pointer\">\n                                            <span className=\"text-sm text-gray-600\">Email Notifications</span>\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"toggle toggle-success toggle-sm\"\n                                                checked={notifications.email}\n                                                onChange={() => toggleNotification('email')}\n                                            />\n                                        </label>\n                                        <label className=\"flex items-center justify-between cursor-pointer\">\n                                            <span className=\"text-sm text-gray-600\">Push Notifications</span>\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"toggle toggle-success toggle-sm\"\n                                                checked={notifications.push}\n                                                onChange={() => toggleNotification('push')}\n                                            />\n                                        </label>\n                                        <label className=\"flex items-center justify-between cursor-pointer\">\n                                            <span className=\"text-sm text-gray-600\">Weekly Reports</span>\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"toggle toggle-success toggle-sm\"\n                                                checked={notifications.weekly}\n                                                onChange={() => toggleNotification('weekly')}\n                                            />\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* AI Search */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-indigo-50 text-indigo-600 rounded-lg\">\n                                    <Bot className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">AI Enhanced Search</p>\n                                    <p className=\"text-sm text-gray-500\">Allow AI to index transactions for natural language search</p>\n                                </div>\n                            </div>\n                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                <input type=\"checkbox\" checked={aiSearch} onChange={(e) => updateAiSearch(e.target.checked)} className=\"sr-only peer\" />\n                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600\"></div>\n                            </label>\n                        </div>\n\n                    </div>\n                </section>\n\n                {/* Account Settings */}\n                <section>\n                    <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 pl-1\">Account</h3>\n                    <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 divide-y divide-gray-100 overflow-hidden\">\n\n                        {/* Profile Picture */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-gray-100 text-gray-600 rounded-full\">\n                                    <User className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Profile Picture</p>\n                                    <p className=\"text-sm text-gray-500\">Update your profile avatar</p>\n                                </div>\n                            </div>\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold overflow-hidden border border-gray-300\">\n                                    tr\n                                </div>\n                                <button className=\"text-sm font-medium text-indigo-600 hover:text-indigo-800 flex items-center gap-1\">\n                                    <Upload className=\"w-3.5 h-3.5\" /> Change\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* Password */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-gray-50 text-gray-600 rounded-lg\">\n                                    <Shield className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Password</p>\n                                    <p className=\"text-sm text-gray-500\">Manage your password and security</p>\n                                </div>\n                            </div>\n                            <button className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition\">\n                                Change Password\n                            </button>\n                        </div>\n\n                        {/* Logout */}\n                        <div className=\"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors cursor-pointer\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-gray-50 text-gray-600 rounded-lg\">\n                                    <LogOut className=\"w-5 h-5\" />\n                                </div>\n                                <p className=\"font-medium text-gray-900\">Log Out</p>\n                            </div>\n                            <div className=\"text-gray-400\">→</div>\n                        </div>\n\n                    </div>\n                </section>\n\n                {/* Data & Privacy */}\n                <section>\n                    <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4 pl-1\">Data & Privacy</h3>\n                    <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 divide-y divide-gray-100 overflow-hidden\">\n\n                        {/* Backup Frequency */}\n                        <div className=\"p-4 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-orange-50 text-orange-600 rounded-lg\">\n                                    <Database className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Backup Frequency</p>\n                                    <p className=\"text-sm text-gray-500\">How often should we backup your data?</p>\n                                </div>\n                            </div>\n                            <select\n                                value={backupFreq}\n                                onChange={(e) => updateBackup(e.target.value)}\n                                className=\"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block p-2.5\"\n                            >\n                                <option value=\"daily\">Daily</option>\n                                <option value=\"weekly\">Weekly</option>\n                                <option value=\"monthly\">Monthly</option>\n                                <option value=\"off\">Off</option>\n                            </select>\n                        </div>\n\n                        {/* Delete Account */}\n                        <div className=\"p-4 flex items-center justify-between opacity-60 hover:opacity-100 transition-opacity\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2 bg-red-50 text-red-600 rounded-lg\">\n                                    <User className=\"w-5 h-5\" />\n                                </div>\n                                <div>\n                                    <p className=\"font-medium text-gray-900\">Delete Account</p>\n                                    <p className=\"text-sm text-gray-500\">Permanently delete your account</p>\n                                </div>\n                            </div>\n                            <button className=\"text-red-600 text-sm font-medium hover:underline\">\n                                Delete Account\n                            </button>\n                        </div>\n                    </div>\n                </section>\n\n                {/* Danger Zone */}\n                <section>\n                    <h3 className=\"text-sm font-semibold text-red-600 uppercase tracking-wide mb-4 pl-1 flex items-center gap-2\">\n                        <AlertTriangle className=\"w-4 h-4\" />\n                        Danger Zone\n                    </h3>\n                    <div className=\"bg-red-50 border border-red-200 rounded-2xl overflow-hidden p-4\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <h4 className=\"text-sm font-semibold text-red-900\">Delete All Transactions</h4>\n                                <p className=\"text-sm text-red-700 mt-1 opacity-80\">\n                                    Permanently remove all transaction data. This cannot be undone.\n                                </p>\n                            </div>\n                            <button\n                                onClick={() => setShowDeleteConfirm(true)}\n                                className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition shadow-sm\"\n                            >\n                                <Trash2 className=\"w-4 h-4\" />\n                                Delete All\n                            </button>\n                        </div>\n                    </div>\n                </section>\n\n                <div className=\"text-center text-xs text-gray-400 pt-8\">\n                    Folioli v1.0.2 • Build 2024.1\n                </div>\n            </div>\n\n            {/* Delete Confirmation Modal */}\n            {showDeleteConfirm && (\n                <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50 animate-in fade-in duration-200\" onClick={() => setShowDeleteConfirm(false)}>\n                    <div className=\"bg-white rounded-2xl shadow-2xl p-6 max-w-md mx-4 transform transition-all scale-100\" onClick={e => e.stopPropagation()}>\n                        <div className=\"flex items-center gap-4 mb-5\">\n                            <div className=\"p-3 bg-red-100 rounded-full flex-shrink-0\">\n                                <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n                            </div>\n                            <div>\n                                <h3 className=\"text-lg font-bold text-gray-900 leading-tight\">Delete All Transactions?</h3>\n                                <p className=\"text-sm text-gray-500 mt-1\">This action is permanent.</p>\n                            </div>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-6 leading-relaxed\">\n                            You are about to permanently delete <strong>all transaction data</strong> from your local database.\n                            This action cannot be undone and no backups will be available unless you've exported your data.\n                        </p>\n                        <div className=\"flex gap-3 justify-end\">\n                            <button\n                                onClick={() => setShowDeleteConfirm(false)}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-gray-200 transition-all\"\n                                disabled={isDeleting}\n                            >\n                                Cancel\n                            </button>\n                            <button\n                                onClick={handleDeleteAll}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-100 transition-all disabled:opacity-70 flex items-center gap-2\"\n                                disabled={isDeleting}\n                            >\n                                {isDeleting ? (\n                                    <>\n                                        <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                                        Deleting...\n                                    </>\n                                ) : (\n                                    \"Yes, Delete Everything\"\n                                )}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3203, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/ui/SearchableSelect.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport clsx from \"clsx\";\nimport { Search, ChevronDown } from \"lucide-react\";\n\ninterface SearchableSelectProps {\n    options: readonly string[];\n    value: string;\n    onChange: (value: string) => void;\n    placeholder?: string;\n    emptyMessage?: string;\n    className?: string;\n}\n\nexport function SearchableSelect({\n    options,\n    value,\n    onChange,\n    placeholder = \"Search...\",\n    emptyMessage = \"No matches found\",\n    className\n}: SearchableSelectProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [search, setSearch] = useState(\"\");\n    const [position, setPosition] = useState<\"below\" | \"above\">(\"below\");\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const filteredOptions = options.filter(opt =>\n        opt.toLowerCase().includes(search.toLowerCase())\n    );\n\n    const handleOpen = () => {\n        if (!isOpen && containerRef.current) {\n            const rect = containerRef.current.getBoundingClientRect();\n            const spaceBelow = window.innerHeight - rect.bottom;\n            setPosition(spaceBelow >= 240 ? \"below\" : \"above\");\n            setSearch(\"\");\n            setIsOpen(true);\n        }\n    };\n\n    const handleSelect = (option: string) => {\n        onChange(option);\n        setIsOpen(false);\n        setSearch(\"\");\n    };\n\n    const handleClose = () => {\n        setIsOpen(false);\n        setSearch(\"\");\n    };\n\n    return (\n        <div ref={containerRef} className=\"relative w-full\">\n            <div\n                className={clsx(\n                    \"w-full flex items-center justify-between cursor-pointer hover:bg-gray-50 transition rounded-lg\",\n                    isOpen && \"bg-lime-50 ring-2 ring-lime-600\"\n                )}\n                onClick={handleOpen}\n            >\n                {isOpen ? (\n                    <div className=\"flex items-center flex-1 px-3 py-2\">\n                        <Search className=\"w-4 h-4 text-gray-400 mr-2 flex-shrink-0\" />\n                        <input\n                            type=\"text\"\n                            autoFocus\n                            placeholder={placeholder}\n                            value={search}\n                            onChange={(e) => setSearch(e.target.value)}\n                            onClick={(e) => e.stopPropagation()}\n                            className=\"w-full bg-transparent text-sm focus:outline-none\"\n                        />\n                    </div>\n                ) : (\n                    <div className=\"flex items-center justify-between w-full p-3\">\n                        <span className={clsx(\n                            \"truncate text-sm\",\n                            value && value !== \"Uncategorized\" ? \"text-gray-900\" : \"text-gray-400\",\n                            className\n                        )}>\n                            {value || \"Uncategorized\"}\n                        </span>\n                        <ChevronDown className=\"w-4 h-4 ml-1 flex-shrink-0 text-gray-400\" />\n                    </div>\n                )}\n            </div>\n\n            {isOpen && (\n                <>\n                    <div className=\"fixed inset-0 z-40\" onClick={handleClose} />\n                    <div className={clsx(\n                        \"absolute left-0 right-0 z-50 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto p-1\",\n                        position === \"below\" ? \"top-full mt-1\" : \"bottom-full mb-1\"\n                    )}>\n                        {filteredOptions.map(option => (\n                            <button\n                                key={option}\n                                type=\"button\"\n                                onClick={() => handleSelect(option)}\n                                className={clsx(\n                                    \"w-full px-3 py-2 text-left text-sm hover:bg-lime-50 transition rounded-lg\",\n                                    value === option ? \"bg-lime-100 text-lime-800 font-medium\" : \"text-gray-700\"\n                                )}\n                            >\n                                {option}\n                            </button>\n                        ))}\n                        {filteredOptions.length === 0 && (\n                            <div className=\"px-3 py-2 text-sm text-gray-400 italic\">{emptyMessage}</div>\n                        )}\n                    </div>\n                </>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAeO,SAAS,iBAAiB,EAC7B,OAAO,EACP,KAAK,EACL,QAAQ,EACR,cAAc,WAAW,EACzB,eAAe,kBAAkB,EACjC,SAAS,EACW;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAoB;IAC5D,MAAM,eAAe,IAAA,+MAAM,EAAiB;IAE5C,MAAM,kBAAkB,QAAQ,MAAM,CAAC,CAAA,MACnC,IAAI,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;IAGjD,MAAM,aAAa;QACf,IAAI,CAAC,UAAU,aAAa,OAAO,EAAE;YACjC,MAAM,OAAO,aAAa,OAAO,CAAC,qBAAqB;YACvD,MAAM,aAAa,OAAO,WAAW,GAAG,KAAK,MAAM;YACnD,YAAY,cAAc,MAAM,UAAU;YAC1C,UAAU;YACV,UAAU;QACd;IACJ;IAEA,MAAM,eAAe,CAAC;QAClB,SAAS;QACT,UAAU;QACV,UAAU;IACd;IAEA,MAAM,cAAc;QAChB,UAAU;QACV,UAAU;IACd;IAEA,qBACI,8OAAC;QAAI,KAAK;QAAc,WAAU;;0BAC9B,8OAAC;gBACG,WAAW,IAAA,gJAAI,EACX,kGACA,UAAU;gBAEd,SAAS;0BAER,uBACG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,gNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;4BACG,MAAK;4BACL,SAAS;4BACT,aAAa;4BACb,OAAO;4BACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4BACzC,SAAS,CAAC,IAAM,EAAE,eAAe;4BACjC,WAAU;;;;;;;;;;;yCAIlB,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAK,WAAW,IAAA,gJAAI,EACjB,oBACA,SAAS,UAAU,kBAAkB,kBAAkB,iBACvD;sCAEC,SAAS;;;;;;sCAEd,8OAAC,mOAAW;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAKlC,wBACG;;kCACI,8OAAC;wBAAI,WAAU;wBAAqB,SAAS;;;;;;kCAC7C,8OAAC;wBAAI,WAAW,IAAA,gJAAI,EAChB,kHACA,aAAa,UAAU,kBAAkB;;4BAExC,gBAAgB,GAAG,CAAC,CAAA,uBACjB,8OAAC;oCAEG,MAAK;oCACL,SAAS,IAAM,aAAa;oCAC5B,WAAW,IAAA,gJAAI,EACX,6EACA,UAAU,SAAS,0CAA0C;8CAGhE;mCARI;;;;;4BAWZ,gBAAgB,MAAM,KAAK,mBACxB,8OAAC;gCAAI,WAAU;0CAA0C;;;;;;;;;;;;;;;;;;;;AAOrF"}},
    {"offset": {"line": 3355, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/ui/ConfirmModal.tsx"],"sourcesContent":["\"use client\";\n\nimport clsx from \"clsx\";\nimport { AlertTriangle } from \"lucide-react\";\n\ninterface ConfirmModalProps {\n    isOpen: boolean;\n    title: string;\n    message: string;\n    confirmLabel?: string;\n    cancelLabel?: string;\n    onConfirm: () => void;\n    onCancel: () => void;\n    variant?: \"danger\" | \"default\";\n    isLoading?: boolean;\n}\n\nexport function ConfirmModal({\n    isOpen,\n    title,\n    message,\n    confirmLabel = \"Confirm\",\n    cancelLabel = \"Cancel\",\n    onConfirm,\n    onCancel,\n    variant = \"default\",\n    isLoading = false\n}: ConfirmModalProps) {\n    if (!isOpen) return null;\n\n    const isDanger = variant === \"danger\";\n\n    return (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\" onClick={onCancel}>\n            <div className=\"bg-white rounded-2xl shadow-xl p-6 max-w-sm mx-4\" onClick={e => e.stopPropagation()}>\n                <div className=\"flex items-center gap-3 mb-4\">\n                    {isDanger && (\n                        <div className=\"p-2 bg-red-100 rounded-full\">\n                            <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n                        </div>\n                    )}\n                    <h3 className=\"text-lg font-semibold text-gray-900\">{title}</h3>\n                </div>\n                <p className=\"text-sm text-gray-600 mb-6\">{message}</p>\n                <div className=\"flex gap-3 justify-end\">\n                    <button\n                        onClick={onCancel}\n                        disabled={isLoading}\n                        className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition disabled:opacity-50\"\n                    >\n                        {cancelLabel}\n                    </button>\n                    <button\n                        onClick={onConfirm}\n                        disabled={isLoading}\n                        className={clsx(\n                            \"px-4 py-2 text-sm font-medium rounded-lg transition disabled:opacity-50\",\n                            isDanger\n                                ? \"text-white bg-red-600 hover:bg-red-700\"\n                                : \"text-white bg-lime-600 hover:bg-lime-700\"\n                        )}\n                    >\n                        {isLoading ? \"Processing...\" : confirmLabel}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBO,SAAS,aAAa,EACzB,MAAM,EACN,KAAK,EACL,OAAO,EACP,eAAe,SAAS,EACxB,cAAc,QAAQ,EACtB,SAAS,EACT,QAAQ,EACR,UAAU,SAAS,EACnB,YAAY,KAAK,EACD;IAChB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,WAAW,YAAY;IAE7B,qBACI,8OAAC;QAAI,WAAU;QAAkE,SAAS;kBACtF,cAAA,8OAAC;YAAI,WAAU;YAAmD,SAAS,CAAA,IAAK,EAAE,eAAe;;8BAC7F,8OAAC;oBAAI,WAAU;;wBACV,0BACG,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,yOAAa;gCAAC,WAAU;;;;;;;;;;;sCAGjC,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;;;;;;;8BAEzD,8OAAC;oBAAE,WAAU;8BAA8B;;;;;;8BAC3C,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BACG,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET;;;;;;sCAEL,8OAAC;4BACG,SAAS;4BACT,UAAU;4BACV,WAAW,IAAA,gJAAI,EACX,2EACA,WACM,2CACA;sCAGT,YAAY,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;AAMvD"}},
    {"offset": {"line": 3460, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/components/TransactionTable.tsx"],"sourcesContent":["\"use client\";\n\nimport clsx from \"clsx\";\nimport { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\nimport { Trash2, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport Papa from \"papaparse\";\nimport { CATEGORIES } from \"@/lib/categories\";\nimport { Transaction, SortField, SortDirection } from \"@/lib/types\";\nimport { SearchableSelect } from \"@/components/ui/SearchableSelect\";\nimport { ConfirmModal } from \"@/components/ui/ConfirmModal\";\nimport { parseDate } from \"@/lib/dashboardUtils\";\n\n// Re-export Transaction for backwards compatibility\nexport type { Transaction } from \"@/lib/types\";\n\n// Modern minimal resize cursor (thin vertical bar with subtle arrows)\nconst RESIZE_CURSOR = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23475569' d='M8 12l-3-3v2H2v2h3v2l3-3zm8 0l3-3v2h3v2h-3v2l-3-3z'/%3E%3Crect x='11' y='4' width='2' height='16' rx='1' fill='%23334155'/%3E%3C/svg%3E\") 12 12, col-resize`;\n\n// Column configuration - using flex ratios for proportional sizing\nconst COLUMNS = [\n    { field: \"date\" as const, label: \"Date\", flex: 1, minWidth: 80 },\n    { field: \"name\" as const, label: \"Name\", flex: 2.5, minWidth: 100 },\n    { field: \"amount\" as const, label: \"Amount\", flex: 1, minWidth: 80, align: \"right\" as const },\n    { field: \"category\" as const, label: \"Category\", flex: 1.5, minWidth: 100 },\n    { field: \"memo\" as const, label: \"Memo\", flex: 1.5, minWidth: 80 },\n];\n\ninterface TransactionTableProps {\n    transactions: Transaction[];\n    onUpdate: (index: number, field: keyof Transaction, value: any) => void;\n    onDelete: (index: number) => void;\n    onPasteImport: (data: any[]) => void;\n    onSave?: () => void;\n}\n\nexport function TransactionTable({ transactions, onUpdate, onDelete, onPasteImport, onSave }: TransactionTableProps) {\n    const [sortField, setSortField] = useState<SortField>(\"date\");\n    const [sortDirection, setSortDirection] = useState<SortDirection>(\"desc\");\n    const [deleteConfirmIndex, setDeleteConfirmIndex] = useState<number | null>(null);\n    const [visibleCount, setVisibleCount] = useState<number | 'all'>(50);\n    const [currentPage, setCurrentPage] = useState(1);\n\n    // Total flex for percentage calculation\n    const totalFlex = COLUMNS.reduce((sum, c) => sum + c.flex, 0);\n\n    // Column widths state (as percentages)\n    const [columnWidths, setColumnWidths] = useState<Record<string, number>>(() =>\n        Object.fromEntries(COLUMNS.map(col => [col.field, (col.flex / totalFlex) * 100]))\n    );\n\n    // Resize state\n    const [resizingColumn, setResizingColumn] = useState<string | null>(null);\n    const resizeStartX = useRef(0);\n    const resizeStartWidth = useRef(0);\n    const justResized = useRef(false);\n    const tableRef = useRef<HTMLTableElement>(null);\n\n    // Memoized sorted transactions\n    const sortedTransactions = useMemo(() => {\n        return [...transactions].sort((a, b) => {\n            if (sortField === \"amount\") {\n                return sortDirection === \"asc\" ? a.amount - b.amount : b.amount - a.amount;\n            }\n            if (sortField === \"date\") {\n                const dateA = parseDate(a.date)?.getTime() ?? 0;\n                const dateB = parseDate(b.date)?.getTime() ?? 0;\n                return sortDirection === \"asc\" ? dateA - dateB : dateB - dateA;\n            }\n            const aVal = a[sortField] ?? \"\";\n            const bVal = b[sortField] ?? \"\";\n            const comparison = String(aVal).localeCompare(String(bVal));\n            return sortDirection === \"asc\" ? comparison : -comparison;\n        });\n    }, [transactions, sortField, sortDirection]);\n\n    const displayedTransactions = useMemo(() => {\n        if (visibleCount === 'all') return sortedTransactions;\n        const startIndex = (currentPage - 1) * visibleCount;\n        return sortedTransactions.slice(startIndex, startIndex + visibleCount);\n    }, [sortedTransactions, visibleCount, currentPage]);\n\n    const totalPages = visibleCount === 'all'\n        ? 1\n        : Math.ceil(sortedTransactions.length / visibleCount);\n\n    // Reset to page 1 when filter/sort changes\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [visibleCount, sortField, sortDirection, transactions.length]);\n\n    // Memoized index lookup (for updates/deletes)\n    const getOriginalIndex = useCallback((displayIndex: number): number => {\n        // Adjust display index to account for pagination\n        const paginationOffset = visibleCount === 'all' ? 0 : (currentPage - 1) * visibleCount;\n        const actualSortedIndex = displayIndex + paginationOffset;\n        const tx = sortedTransactions[actualSortedIndex];\n        return transactions.findIndex(t => t === tx);\n    }, [sortedTransactions, transactions, currentPage, visibleCount]);\n\n    // Handle column header click for sorting\n    const handleSort = useCallback((field: SortField) => {\n        // Don't sort if we just finished resizing\n        if (justResized.current) return;\n\n        if (sortField === field) {\n            setSortDirection(prev => prev === \"asc\" ? \"desc\" : \"asc\");\n        } else {\n            setSortField(field);\n            setSortDirection(\"asc\");\n        }\n    }, [sortField]);\n\n    // Sort indicator\n    const SortIndicator = ({ field }: { field: SortField }) => {\n        if (sortField !== field) return null;\n        return (\n            <span className=\"ml-1.5 inline-block\">\n                <svg width=\"8\" height=\"6\" viewBox=\"0 0 8 6\" fill=\"currentColor\"\n                    className={clsx(\"transition-transform\", sortDirection === \"desc\" && \"rotate-180\")}>\n                    <path d=\"M4 0L8 6H0L4 0Z\" />\n                </svg>\n            </span>\n        );\n    };\n\n    // Start column resize\n    const handleResizeStart = (field: string, e: React.MouseEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setResizingColumn(field);\n        resizeStartX.current = e.clientX;\n        resizeStartWidth.current = columnWidths[field];\n    };\n\n    // Handle resize mouse move\n    useEffect(() => {\n        if (!resizingColumn) return;\n\n        const handleMouseMove = (e: MouseEvent) => {\n            if (!tableRef.current) return;\n            const tableWidth = tableRef.current.offsetWidth;\n            const deltaPixels = e.clientX - resizeStartX.current;\n            // Convert pixel delta to percentage\n            const deltaPercent = (deltaPixels / tableWidth) * 100;\n            const col = COLUMNS.find(c => c.field === resizingColumn);\n            // Ensure minimum width in percentage (approximate)\n            const minPercent = ((col?.minWidth || 60) / tableWidth) * 100;\n            const newWidth = Math.max(minPercent, resizeStartWidth.current + deltaPercent);\n            setColumnWidths(prev => ({ ...prev, [resizingColumn]: newWidth }));\n        };\n\n        const handleMouseUp = () => {\n            setResizingColumn(null);\n            // Set flag to prevent sort from triggering\n            justResized.current = true;\n            setTimeout(() => { justResized.current = false; }, 100);\n        };\n\n        document.addEventListener(\"mousemove\", handleMouseMove);\n        document.addEventListener(\"mouseup\", handleMouseUp);\n        document.body.style.cursor = RESIZE_CURSOR;\n        document.body.style.userSelect = \"none\";\n\n        return () => {\n            document.removeEventListener(\"mousemove\", handleMouseMove);\n            document.removeEventListener(\"mouseup\", handleMouseUp);\n            document.body.style.cursor = \"\";\n            document.body.style.userSelect = \"\";\n        };\n    }, [resizingColumn, columnWidths]);\n\n    // Double-click to auto-fit column width\n    const handleDoubleClick = (field: string) => {\n        if (!tableRef.current) return;\n\n        const colIndex = COLUMNS.findIndex(c => c.field === field);\n        const cells = tableRef.current.querySelectorAll(`td:nth-child(${colIndex + 1}), th:nth-child(${colIndex + 1})`);\n        const tableWidth = tableRef.current.offsetWidth;\n\n        // Create a temporary hidden element to measure text width\n        const measureEl = document.createElement('span');\n        measureEl.style.cssText = 'position:absolute;visibility:hidden;white-space:nowrap;font-size:inherit;font-family:inherit;font-weight:inherit;';\n        document.body.appendChild(measureEl);\n\n        let maxWidth = COLUMNS[colIndex].minWidth;\n        cells.forEach(cell => {\n            const htmlCell = cell as HTMLElement;\n            // Get the actual text content\n            const textContent = htmlCell.textContent || '';\n            // Copy font styles from the cell\n            const styles = window.getComputedStyle(htmlCell);\n            measureEl.style.fontSize = styles.fontSize;\n            measureEl.style.fontFamily = styles.fontFamily;\n            measureEl.style.fontWeight = styles.fontWeight;\n            measureEl.textContent = textContent;\n\n            // Measure and add padding (16px on each side = 32px total)\n            const width = measureEl.offsetWidth + 32;\n            maxWidth = Math.max(maxWidth, width);\n        });\n\n        document.body.removeChild(measureEl);\n\n        // Convert to percentage, cap at 50% of table width\n        const maxPercent = (Math.min(maxWidth, tableWidth * 0.5) / tableWidth) * 100;\n        setColumnWidths(prev => ({ ...prev, [field]: maxPercent }));\n    };\n\n    // Global paste listener for CSV data\n    useEffect(() => {\n        const handlePaste = (e: ClipboardEvent) => {\n            const target = e.target as HTMLElement;\n            if (target?.tagName === \"INPUT\" || target?.tagName === \"TEXTAREA\") return;\n\n            const clipboardData = e.clipboardData?.getData(\"text\");\n            if (!clipboardData) return;\n\n            const hasTabsOrCommas = clipboardData.includes(\"\\t\") || clipboardData.includes(\",\");\n            const hasNewlines = clipboardData.includes(\"\\n\");\n\n            if (hasTabsOrCommas && hasNewlines) {\n                e.preventDefault();\n                Papa.parse(clipboardData, {\n                    header: true,\n                    skipEmptyLines: true,\n                    complete: (results) => {\n                        if (results.data.length > 0) {\n                            onPasteImport(results.data as any[]);\n                        }\n                    }\n                });\n            }\n        };\n\n        document.addEventListener(\"paste\", handlePaste);\n        return () => document.removeEventListener(\"paste\", handlePaste);\n    }, [onPasteImport]);\n\n    const confirmDelete = () => {\n        if (deleteConfirmIndex !== null) {\n            onDelete(getOriginalIndex(deleteConfirmIndex));\n            setDeleteConfirmIndex(null);\n        }\n    };\n\n    const deleteTransaction = deleteConfirmIndex !== null ? sortedTransactions[deleteConfirmIndex] : null;\n\n    const hasPendingTransactions = transactions.some(t => t.status === \"pending\");\n\n    return (\n        <div className=\"h-full bg-white border border-gray-300 shadow-sm rounded-2xl overflow-hidden flex flex-col\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center p-4 bg-gray-50 border-b border-gray-300 gap-4\">\n                <div className=\"flex items-center gap-4\">\n                    <h2 className=\"text-sm font-bold text-gray-700 uppercase tracking-wide\">Transactions</h2>\n                    <span className=\"text-xs text-gray-400 font-medium\">{sortedTransactions.length} total</span>\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                    {/* Rows per page selector */}\n                    <div className=\"flex items-center gap-2 bg-white rounded-lg border border-gray-200 p-1 shadow-sm\">\n                        <span className=\"text-xs font-medium text-gray-400 px-2 uppercase tracking-wide\">Show</span>\n                        <div className=\"flex gap-1\">\n                            {[50, 100, 200].map(count => (\n                                <button\n                                    key={count}\n                                    onClick={() => setVisibleCount(count)}\n                                    className={clsx(\n                                        \"px-2.5 py-1 text-xs font-medium rounded-md transition-all\",\n                                        visibleCount === count\n                                            ? \"bg-lime-100 text-lime-700 shadow-sm\"\n                                            : \"text-gray-500 hover:bg-gray-50 hover:text-gray-900\"\n                                    )}\n                                >\n                                    {count}\n                                </button>\n                            ))}\n                            <button\n                                onClick={() => setVisibleCount('all')}\n                                className={clsx(\n                                    \"px-2.5 py-1 text-xs font-medium rounded-md transition-all\",\n                                    visibleCount === 'all'\n                                        ? \"bg-lime-100 text-lime-700 shadow-sm\"\n                                        : \"text-gray-500 hover:bg-gray-50 hover:text-gray-900\"\n                                )}\n                            >\n                                All\n                            </button>\n                        </div>\n                    </div>\n\n                    {onSave && hasPendingTransactions && (\n                        <button\n                            onClick={onSave}\n                            className=\"bg-lime-600 text-white text-sm px-4 py-1.5 rounded-lg hover:bg-lime-700 transition font-medium shadow-sm flex items-center gap-2\"\n                        >\n                            Save Changes\n                        </button>\n                    )}\n                </div>\n            </div>\n\n            {/* Delete Confirmation Modal */}\n            <ConfirmModal\n                isOpen={deleteConfirmIndex !== null}\n                title=\"Delete Transaction?\"\n                message={`Are you sure you want to delete \"${deleteTransaction?.name}\"? This action cannot be undone.`}\n                confirmLabel=\"Delete\"\n                onConfirm={confirmDelete}\n                onCancel={() => setDeleteConfirmIndex(null)}\n                variant=\"danger\"\n            />\n\n            {/* Table */}\n            <div className=\"flex-1 overflow-auto\">\n                <table ref={tableRef} className=\"w-full border-collapse\" style={{ tableLayout: 'fixed' }}>\n                    <thead className=\"bg-[#1e293b] text-white sticky top-0 z-10 shadow-sm\">\n                        <tr>\n                            {COLUMNS.map(({ field, label, align }) => (\n                                <th\n                                    key={field}\n                                    className={clsx(\n                                        \"relative px-4 py-3 text-xs font-semibold uppercase tracking-wider border-r border-slate-700 cursor-pointer hover:bg-slate-700 transition select-none\",\n                                        align === \"right\" && \"text-right\"\n                                    )}\n                                    style={{ width: `${columnWidths[field]}%` }}\n                                    onClick={() => handleSort(field)}\n                                >\n                                    <span className={clsx(\"flex items-center\", align === \"right\" && \"justify-end\")}>\n                                        {label} <SortIndicator field={field} />\n                                    </span>\n                                    {/* Resize handle */}\n                                    <div\n                                        className=\"absolute top-0 right-0 w-2 h-full hover:bg-lime-400/50 z-10\"\n                                        style={{ cursor: RESIZE_CURSOR }}\n                                        onClick={(e) => e.stopPropagation()}\n                                        onMouseDown={(e) => handleResizeStart(field, e)}\n                                        onDoubleClick={(e) => { e.stopPropagation(); handleDoubleClick(field); }}\n                                    />\n                                </th>\n                            ))}\n                            <th className=\"w-12\"></th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                        {displayedTransactions.map((tx, sortedIdx) => {\n                            const originalIdx = getOriginalIndex(sortedIdx);\n                            return (\n                                <tr key={originalIdx} className={clsx(\"hover:bg-lime-50/50 transition-colors group\", tx.status === \"pending\" && \"bg-orange-50\")}>\n                                    <td className=\"px-4 py-3 text-sm text-gray-900 border-r border-gray-200 truncate\">{tx.date}</td>\n                                    <td className=\"px-4 py-3 text-sm font-medium text-gray-900 border-r border-gray-200 truncate\">{tx.name}</td>\n                                    <td className={clsx(\n                                        \"px-4 py-3 text-sm text-right font-mono border-r border-gray-200 truncate\",\n                                        tx.amount < 0 ? \"text-red-600\" : \"text-emerald-700 font-medium\"\n                                    )}>\n                                        {tx.amount < 0 ? \"-\" : \"\"}${Math.abs(tx.amount).toFixed(2)}\n                                    </td>\n                                    <td className=\"px-0 py-0 border-r border-gray-200 relative\">\n                                        <SearchableSelect\n                                            options={CATEGORIES}\n                                            value={tx.category || \"Uncategorized\"}\n                                            onChange={(value) => onUpdate(originalIdx, \"category\", value)}\n                                            placeholder=\"Search categories...\"\n                                            emptyMessage=\"No matching categories\"\n                                            className={tx.status === \"pending\" ? \"text-orange-600 font-medium\" : undefined}\n                                        />\n                                    </td>\n                                    <td className=\"px-4 py-3 text-sm text-gray-500 truncate\">\n                                        {tx.memo || \"—\"}\n                                    </td>\n\n                                    <td className=\"p-0 w-12\">\n                                        <button\n                                            onClick={() => setDeleteConfirmIndex(sortedIdx)}\n                                            className=\"w-9 h-9 m-auto flex items-center justify-center opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all\"\n                                            title=\"Delete transaction\"\n                                        >\n                                            <Trash2 className=\"w-4 h-4\" />\n                                        </button>\n                                    </td>\n                                </tr>\n                            );\n                        })}\n                    </tbody>\n                </table>\n                {transactions.length === 0 && (\n                    <div className=\"text-center p-12 text-gray-400 bg-gray-50/50\">\n                        No transactions found. Import a CSV to get started.\n                    </div>\n                )}\n            </div>\n            {/* Pagination Controls - Minimal */}\n            {visibleCount !== 'all' && sortedTransactions.length > 0 && (\n                <div className=\"flex items-center justify-between px-3 py-2 border-t border-gray-100 bg-white\">\n                    <div className=\"text-xs text-gray-400\">\n                        <span className=\"font-medium text-gray-600\">{(currentPage - 1) * visibleCount + 1}-{(Math.min(currentPage * visibleCount, sortedTransactions.length))}</span> of {sortedTransactions.length}\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                        <button\n                            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                            disabled={currentPage === 1}\n                            className=\"p-1 text-gray-400 hover:text-gray-700 hover:bg-gray-50 rounded disabled:opacity-30 disabled:hover:bg-transparent transition-colors\"\n                            title=\"Previous Page\"\n                        >\n                            <ChevronLeft className=\"w-4 h-4\" />\n                        </button>\n                        <span className=\"text-xs text-gray-500 font-medium px-1 min-w-[3rem] text-center select-none\">\n                            {currentPage} / {totalPages}\n                        </span>\n                        <button\n                            onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                            disabled={currentPage === totalPages}\n                            className=\"p-1 text-gray-400 hover:text-gray-700 hover:bg-gray-50 rounded disabled:opacity-30 disabled:hover:bg-transparent transition-colors\"\n                            title=\"Next Page\"\n                        >\n                            <ChevronRight className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4166, "column": 0}, "map": {"version":3,"sources":["file:///Users/tristan/Developer/Folioli/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { listen } from \"@tauri-apps/api/event\";\nimport Papa from \"papaparse\";\nimport { initDB, getDB } from \"@/lib/db\";\nimport { autoCategorize } from \"@/lib/categories\";\nimport { Tab, Transaction } from \"@/lib/types\";\nimport { Dashboard } from \"@/components/Dashboard\";\nimport { DropZone } from \"@/components/DropZone\";\nimport { Header } from \"@/components/Header\";\nimport { SettingsPage } from \"@/components/SettingsPage\";\nimport { TransactionTable } from \"@/components/TransactionTable\";\n\n\nexport default function Home() {\n    const [transactions, setTransactions] = useState<Transaction[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isDragOver, setIsDragOver] = useState(false);\n    const [activeTab, setActiveTab] = useState<Tab>(\"table\");\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n    // Initialize database and Tauri file drop listener on component mount\n    useEffect(() => {\n        let unlistenDragOver: (() => void) | undefined;\n        let unlistenDragLeave: (() => void) | undefined;\n        let unlistenDrop: (() => void) | undefined;\n\n        async function setup() {\n            // Initialize DB\n            await initDB();\n            await loadTransactions();\n            setIsLoading(false);\n\n            // Tauri file drop listeners\n            unlistenDragOver = await listen<{ paths: string[] }>(\"tauri://drag-over\", () => {\n                setIsDragOver(true);\n            });\n\n            unlistenDragLeave = await listen(\"tauri://drag-leave\", () => {\n                setIsDragOver(false);\n            });\n\n            unlistenDrop = await listen<{ paths: string[] }>(\"tauri://drag-drop\", async (event) => {\n                setIsDragOver(false);\n                const paths = event.payload.paths;\n                console.log(\"Tauri Drop Event - Paths:\", paths);\n\n                // Check for valid file types (CSV or Excel)\n                const validExtensions = [\".csv\", \".xls\", \".xlsx\"];\n                const validPath = paths.find(p =>\n                    validExtensions.some(ext => p.toLowerCase().endsWith(ext))\n                );\n\n                if (!validPath) {\n                    const droppedExt = paths[0]?.split('.').pop()?.toUpperCase() || 'unknown';\n                    const msg = `Unsupported file type (.${droppedExt}). Please drop a CSV or Excel file.`;\n                    console.log(\"Setting error message:\", msg);\n                    setErrorMessage(msg);\n                    setTimeout(() => setErrorMessage(null), 5000);\n                    return;\n                }\n\n                // Currently only CSV is fully supported\n                if (!validPath.toLowerCase().endsWith(\".csv\")) {\n                    setErrorMessage(\"Excel support coming soon. Please export as CSV for now.\");\n                    setTimeout(() => setErrorMessage(null), 5000);\n                    return;\n                }\n\n                try {\n                    const { readTextFile } = await import(\"@tauri-apps/plugin-fs\");\n                    const text = await readTextFile(validPath);\n\n                    Papa.parse(text, {\n                        header: true,\n                        skipEmptyLines: true,\n                        complete: (results) => {\n                            console.log(\"Parsed CSV via Tauri:\", results);\n                            if (results.data.length > 0) {\n                                handleImport(results.data as any[]);\n                            } else {\n                                setErrorMessage(\"CSV file was empty or could not be parsed.\");\n                                setTimeout(() => setErrorMessage(null), 5000);\n                            }\n                        },\n                        error: (err: Error) => {\n                            console.error(\"CSV Parse Error:\", err);\n                            setErrorMessage(\"Failed to parse the CSV file.\");\n                            setTimeout(() => setErrorMessage(null), 5000);\n                        }\n                    });\n                } catch (err) {\n                    console.error(\"File read error:\", err);\n                    setErrorMessage(\"Could not read the dropped file. Please try again.\");\n                    setTimeout(() => setErrorMessage(null), 5000);\n                }\n            });\n        }\n\n        setup();\n\n        return () => {\n            unlistenDragOver?.();\n            unlistenDragLeave?.();\n            unlistenDrop?.();\n        };\n    }, []);\n\n    async function loadTransactions() {\n        try {\n            const db = getDB();\n            const rows = await db.select<Transaction[]>(\"SELECT * FROM transactions ORDER BY date DESC\");\n            setTransactions(rows);\n        } catch (e) {\n            console.error(\"Failed to load transactions:\", e);\n        }\n    }\n\n    const handleImport = useCallback((rawRows: any[]) => {\n        if (rawRows.length === 0) return;\n\n        console.log(\"Raw Import Keys:\", Object.keys(rawRows[0]));\n\n        // Helper to find key case-insensitively\n        const findVal = (row: any, keys: string[]) => {\n            const rowKeys = Object.keys(row);\n            for (const k of keys) {\n                const found = rowKeys.find(rk => rk.toLowerCase() === k.toLowerCase());\n                if (found) return row[found];\n            }\n            return null;\n        };\n\n        const mapped: Transaction[] = rawRows.map(row => {\n            const amountStr = findVal(row, [\"amount\", \"amt\", \"debit\", \"credit\", \"value\"]);\n            const amount = parseFloat(amountStr || \"0\");\n            const name = findVal(row, [\"description\", \"desc\", \"payee\", \"name\", \"transaction\", \"merchant\"]) || \"Unknown\";\n            const date = findVal(row, [\"date\", \"posting date\", \"transaction date\", \"time\"]) || new Date().toISOString().split('T')[0];\n            const memo = findVal(row, [\"memo\", \"details\", \"notes\"]) || \"\";\n\n            const category = autoCategorize(name);\n\n            return {\n                date: date,\n                name: name,\n                amount: isNaN(amount) ? 0 : amount,\n                category: category,\n                memo: memo,\n                status: \"pending\" as const\n            };\n        }).filter(t => t.amount !== 0 || t.name !== \"Unknown\");\n\n        if (mapped.length === 0) {\n            alert(\"Could not map any transactions. Check CSV headers. Looked for: Date, Description/Name, Amount.\");\n        } else {\n            setTransactions(prev => [...mapped, ...prev]);\n        }\n    }, []);\n\n    const handleUpdate = (index: number, field: keyof Transaction, value: any) => {\n        setTransactions(prev => {\n            const copy = [...prev];\n            copy[index] = { ...copy[index], [field]: value };\n            return copy;\n        });\n    };\n\n    const handleSave = async () => {\n        try {\n            const db = getDB();\n\n            for (const tx of transactions) {\n                if (!tx.id) {\n                    await db.execute(\n                        \"INSERT INTO transactions (date, name, amount, category, memo, status) VALUES ($1, $2, $3, $4, $5, $6)\",\n                        [tx.date, tx.name, tx.amount, tx.category, tx.memo, \"confirmed\"]\n                    );\n                } else {\n                    await db.execute(\n                        \"UPDATE transactions SET date=$1, name=$2, amount=$3, category=$4, memo=$5, status=$6 WHERE id=$7\",\n                        [tx.date, tx.name, tx.amount, tx.category, tx.memo, \"confirmed\", tx.id]\n                    );\n                }\n            }\n\n            await loadTransactions();\n            alert(\"Saved successfully!\");\n        } catch (e) {\n            console.error(\"Save failed:\", e);\n            alert(\"Failed to save data.\");\n        }\n    };\n\n    const handleDelete = useCallback((index: number) => {\n        setTransactions(prev => prev.filter((_, i) => i !== index));\n    }, []);\n\n    const handleDeleteAllTransactions = async () => {\n        const db = getDB();\n        await db.execute(\"DELETE FROM transactions\");\n        setTransactions([]);\n    };\n\n    if (isLoading) return <div className=\"p-8 text-center\">Loading Folioli...</div>;\n\n    return (\n        <div className={`h-screen bg-gray-50 flex flex-col font-sans overflow-hidden ${isDragOver ? 'ring-4 ring-lime-600 ring-inset' : ''}`}>\n            <Header activeTab={activeTab} onTabChange={setActiveTab} />\n\n            {/* Error Banner */}\n            {errorMessage && (\n                <div className=\"fixed top-4 left-1/2 -translate-x-1/2 z-50\">\n                    <div className=\"flex items-center gap-3 px-5 py-3 bg-white border border-red-200 rounded-2xl shadow-lg\">\n                        <div className=\"p-2 bg-red-100 rounded-full\">\n                            <svg className=\"w-5 h-5 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                            </svg>\n                        </div>\n                        <span className=\"text-sm font-medium text-gray-900\">{errorMessage}</span>\n                        <button\n                            onClick={() => setErrorMessage(null)}\n                            className=\"ml-2 p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition\"\n                        >\n                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            <main className=\"flex-1 p-8 flex flex-col overflow-hidden\">\n                {activeTab === \"dashboard\" && (\n                    <div className=\"flex-1 min-h-0 overflow-hidden\">\n                        <Dashboard transactions={transactions} />\n                    </div>\n                )}\n                {activeTab === \"table\" && (\n                    <>\n                        <section className=\"mb-6 flex-shrink-0\">\n                            <DropZone isDragActive={isDragOver} />\n                        </section>\n\n                        <section className=\"flex-1 min-h-0 overflow-hidden\">\n                            <TransactionTable\n                                transactions={transactions}\n                                onUpdate={handleUpdate}\n                                onDelete={handleDelete}\n                                onPasteImport={handleImport}\n                                onSave={handleSave}\n                            />\n                        </section>\n                    </>\n                )}\n                {activeTab === \"settings\" && (\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                        <SettingsPage onDeleteAllTransactions={handleDeleteAllTransactions} />\n                    </div>\n                )}\n            </main >\n        </div >\n    );\n}\n"],"names":[],"mappings":"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"}}]
}